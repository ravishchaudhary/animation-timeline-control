{"version":3,"file":"animation-timeline.js","mappings":"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","sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./src/timelineEventsEmitter.ts","webpack:///./src/enums/timelineKeyframeShape.ts","webpack:///./src/utils/timelineUtils.ts","webpack:///./src/settings/defaults/defaultGroupStyle.ts","webpack:///./src/settings/defaults/defaultTimelineKeyframeStyle.ts","webpack:///./src/settings/defaults/defaultTimelineRowStyle.ts","webpack:///./src/utils/timelineStyleUtils.ts","webpack:///./src/enums/timelineElementType.ts","webpack:///./src/utils/timelineDraggableData.ts","webpack:///./src/utils/events/timelineBaseEvent.ts","webpack:///./src/utils/events/timelineKeyframeChangedEvent.ts","webpack:///./src/enums/timelineEventSource.ts","webpack:///./src/utils/events/timelineTimeChangedEvent.ts","webpack:///./src/enums/timelineSelectionEventSource.ts","webpack:///./src/utils/events/timelineSelectedEvent.ts","webpack:///./src/utils/events/timelineClickEvent.ts","webpack:///./src/utils/events/timelineDragEvent.ts","webpack:///./src/enums/timelineInteractionMode.ts","webpack:///./src/enums/timelineCursorType.ts","webpack:///./src/enums/timelineCapShape.ts","webpack:///./src/enums/timelineSelectionMode.ts","webpack:///./src/enums/timelineEvents.ts","webpack:///./src/enums/timelineScrollSource.ts","webpack:///./src/settings/defaults/defaultTimelineConsts.ts","webpack:///./src/settings/defaults/defaultTimelineStyle.ts","webpack:///./src/settings/defaults/defaultTimelineOptions.ts","webpack:///./src/timeline.ts","webpack:///./src/animation-timeline.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"timelineModule\"] = factory();\n\telse\n\t\troot[\"timelineModule\"] = factory();\n})(self, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* eslint-disable  @typescript-eslint/no-explicit-any */\ninterface TimelineEvent {\n  topic: string;\n  callback: (args: any) => void;\n}\n\n/**\n * Timeline events emitter.\n */\nexport class TimelineEventsEmitter {\n  /**\n   * Active events subscriptions.\n   */\n  _subscriptions: TimelineEvent[] = [];\n\n  /**\n   * Subscribe event.\n   * @param topic event name.\n   * @param callback callback to be added.\n   */\n  on<T>(topic: string, callback: (args: T) => void): boolean {\n    if (!callback) {\n      return false;\n    }\n\n    this._subscriptions.push({\n      topic: topic,\n      callback: callback,\n    } as TimelineEvent);\n    return true;\n  }\n  /**\n   * Remove an event from the subscriptions list.\n   */\n  off<T>(topic: string, callback: (args: T) => void): boolean {\n    const before = this._subscriptions.length;\n    this._subscriptions = this._subscriptions.filter((event) => {\n      return event && event.callback != callback && event.topic != topic;\n    });\n    return before !== this._subscriptions.length;\n  }\n\n  /**\n   * Unsubscribe all\n   */\n  offAll(): void {\n    // Remove all callbacks from array.\n    this._subscriptions.length = 0;\n  }\n\n  /**\n   * Emit event.\n   * @param topic Event name.\n   * @param args Event arguments.\n   */\n  emit<T>(topic: string, args: T): void {\n    this._subscriptions.forEach((event) => {\n      if (event?.topic === topic && event?.callback) {\n        event.callback(args);\n      }\n    });\n  }\n}\n","export enum TimelineKeyframeShape {\n  None = 'none',\n  Rhomb = 'rhomb',\n  Circle = 'circle',\n  Rect = 'rect',\n}\n","import { TimelineRanged } from '../models/timelineRanged';\nimport { TimelineOptions } from '../settings/timelineOptions';\n\nconst defaultDenominators = [1, 2, 5, 10];\nexport class TimelineUtils {\n  static drawLine(ctx: CanvasRenderingContext2D, x1: number, y1: number, x2: number, y2: number): void {\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n  }\n  /**\n   * Check is valid number.\n   */\n  static isNumber(val?: number | null): boolean {\n    if (typeof val === 'number' && (val || val === 0) && !isNaN(val) && Number.isFinite(val)) {\n      return true;\n    }\n\n    return false;\n  }\n  static deleteElement<T>(array: Array<T>, element: T): Array<T> {\n    const index: number = array.indexOf(element);\n    if (index !== -1) {\n      return array.splice(index, 1);\n    }\n    return array;\n  }\n\n  /**\n   * Check rectangle overlap x,y\n   */\n  static isOverlap(x: number, y: number, rectangle: DOMRect): boolean {\n    if (!rectangle) {\n      return false;\n    }\n\n    if (rectangle.x <= x && rectangle.x + rectangle.width >= x && rectangle.y <= y && rectangle.y + rectangle.height >= y) {\n      return true;\n    }\n\n    return false;\n  }\n  /**\n   * Find beautiful step for the header line gauge.\n   */\n  static findGoodStep(originalStep: number, divisionCheck = 0, denominators: number[] = defaultDenominators): number {\n    if (!denominators) {\n      denominators = defaultDenominators;\n    }\n    if (originalStep <= 0 || isNaN(originalStep) || !Number.isFinite(originalStep)) {\n      return originalStep;\n    }\n    let step = originalStep;\n    let lastDistance = null;\n    const pow = TimelineUtils.getPowArgument(originalStep);\n    for (let i = 0; i < denominators.length; i++) {\n      const denominator = denominators[i];\n      const calculatedStep = denominator * Math.pow(10, pow);\n      if (divisionCheck && divisionCheck % calculatedStep != 0) {\n        continue;\n      }\n      const distance = TimelineUtils.getDistance(originalStep, calculatedStep);\n\n      if (distance == 0 || (distance <= 0.1 && pow > 0)) {\n        lastDistance = distance;\n        step = calculatedStep;\n        break;\n      } else if (!lastDistance || lastDistance > distance) {\n        lastDistance = distance;\n        step = calculatedStep;\n      }\n    }\n\n    return step;\n  }\n  /**\n   * Keep value in min, max bounds.\n   */\n  static keepInBounds(value: number, min: number | null | undefined = null, max: number | null | undefined = null): number {\n    if (TimelineUtils.isNumber(value)) {\n      if (TimelineUtils.isNumber(min) && (min || min === 0)) {\n        value = Math.max(value, min);\n      }\n      if (TimelineUtils.isNumber(max) && (max || max === 0)) {\n        value = Math.min(value, max);\n      }\n    }\n\n    return value;\n  }\n  static setMinMax(to: TimelineRanged, from: TimelineRanged | null, shrink = false): TimelineRanged {\n    if (!from || !to) {\n      return to;\n    }\n    const fromMin = from ? from.min : Number.NaN;\n    const toMin = to.min;\n    const isFromMinNumber = (fromMin || fromMin === 0) && TimelineUtils.isNumber(fromMin);\n    const isToMinNumber = (toMin || toMin === 0) && TimelineUtils.isNumber(toMin);\n    // get absolute min and max bounds:\n    if (isFromMinNumber && isToMinNumber) {\n      to.min = shrink ? Math.min(fromMin, toMin) : Math.max(fromMin, toMin);\n    } else if (isFromMinNumber) {\n      to.min = fromMin;\n    }\n    const fromMax = from ? from.max : Number.NaN;\n    const toMax = to.max;\n    const isFromMaxNumber = (fromMax || fromMax === 0) && TimelineUtils.isNumber(fromMax);\n    const isToMaxNumber = (toMax || toMax === 0) && TimelineUtils.isNumber(toMax);\n    if (isFromMaxNumber && isToMaxNumber) {\n      to.max = shrink ? Math.max(fromMax, toMax) : Math.min(fromMax, toMax);\n    } else if (isFromMaxNumber) {\n      to.max = fromMax;\n    }\n\n    return to;\n  }\n  static shrinkSelf(rect: DOMRect, value: number): DOMRect {\n    if (!rect) {\n      return rect;\n    }\n    rect.x -= value;\n    rect.y -= value;\n    rect.width += value;\n    rect.height += value;\n    return rect;\n  }\n  /**\n   * Check whether rectangle intersects another rectangle\n   */\n  static isRectIntersects(rect: DOMRect, rect2: DOMRect, touch = false): boolean {\n    if (!rect || !rect2) {\n      console.log('Rectangles cannot be empty');\n      return false;\n    }\n    const right = rect2.x + rect2.width;\n    const bottom = rect2.y + rect2.height;\n    if (touch) {\n      if (\n        // Left\n        rect.x <= right &&\n        // Right\n        rect2.x <= rect.x + rect.width &&\n        // Top\n        rect.y <= bottom &&\n        // Bottom\n        rect2.y <= rect.y + rect.height\n      ) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      if (\n        // Left\n        rect.x < right &&\n        // Right\n        rect2.x < rect.x + rect.width &&\n        // Top\n        rect.y < bottom &&\n        // Bottom\n        rect2.y < rect.y + rect.height\n      ) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }\n\n  static getDistance(x1: number, y1: number, x2?: number, y2?: number): number {\n    if (x2 != undefined && y2 != undefined) {\n      return Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));\n    } else {\n      return Math.abs(x1 - y1);\n    }\n  }\n\n  /**\n   * Get sign of the number. 1 or -1.\n   */\n  static sign(p: number): number {\n    return p >= 0 ? 1 : -1;\n  }\n\n  /**\n   * Clear browser text selection.\n   */\n  static clearBrowserSelection(): void {\n    if (!window) {\n      return;\n    }\n    if (window.getSelection) {\n      const selection = window.getSelection();\n      if (selection) {\n        selection.removeAllRanges();\n      }\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const doc: any = window.document;\n      if (doc.selection) {\n        doc.selection.empty();\n      }\n    }\n  }\n  static getPowArgument(toCheck: number): number {\n    if (!toCheck || toCheck === 0 || !isFinite(toCheck)) {\n      return 1;\n    }\n    // some optimization for numbers:\n    if (toCheck >= 10 && toCheck < 100) {\n      return 1;\n    } else if (toCheck >= 100 && toCheck < 1000) {\n      return 2;\n    } else if (toCheck >= 1000 && toCheck < 10000) {\n      return 3;\n    }\n\n    toCheck = Math.abs(toCheck);\n    let category = 0;\n    const s = this.sign(toCheck);\n    if (toCheck > 1) {\n      while (toCheck >= 1) {\n        toCheck = Math.floor(toCheck / 10.0);\n        category++;\n      }\n\n      return s * category - 1;\n    } else if (toCheck > 0.0) {\n      // Get number of zeros before the number.\n      const zerosCount = Math.floor(Math.log(toCheck) / Math.log(10) + 1) - 1;\n      return zerosCount;\n    } else {\n      return 1;\n    }\n  }\n\n  static deepClone = <T>(previousOptions: T): T => {\n    return JSON.parse(JSON.stringify(previousOptions)) as T;\n  };\n\n  static cloneOptions = (previousOptions: TimelineOptions): TimelineOptions => {\n    const clonedValue = JSON.parse(\n      JSON.stringify(previousOptions, (key, value) => {\n        // No need to clone HTML element passed as ID.\n        return key === 'id' ? undefined : value;\n      }),\n    );\n    clonedValue.id = previousOptions.id;\n    return clonedValue;\n  };\n  /**\n   * Merge options. New keys will be added.\n   */\n  static mergeOptions(previousOptions: TimelineOptions, newOptions: TimelineOptions): TimelineOptions {\n    newOptions = newOptions || ({} as TimelineOptions);\n    // Apply incoming options to default. (override default)\n    // Deep clone default options:\n    const toArg = TimelineUtils.cloneOptions(previousOptions);\n    // Merge options with the default.\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const mergeOptionsDeep = (to: any, from: any): void => {\n      if (!to || !from) {\n        return;\n      }\n      // eslint-disable-next-line prefer-const\n      for (let key in from) {\n        if (Object.prototype.hasOwnProperty.call(from, key)) {\n          if (from[key] !== undefined) {\n            if (typeof from[key] === 'object') {\n              if (key === 'id') {\n                if (from[key] && from[key] !== to[key]) {\n                  to[key] = from[key];\n                }\n              } else {\n                if (!to[key]) {\n                  to[key] = from[key];\n                } else {\n                  mergeOptionsDeep(to[key], from[key]);\n                }\n              }\n            } else {\n              to[key] = from[key];\n            }\n          }\n        }\n      }\n    };\n\n    mergeOptionsDeep(toArg, newOptions);\n    return toArg;\n  }\n  /**\n   * Format numbers with len\n   */\n  static timePadZero(num: number, len = 2): string {\n    let str = String(num);\n    const threshold = Math.pow(10, len - 1);\n    if (num < threshold) {\n      while (String(threshold).length > str.length) {\n        str = `0${num}`;\n      }\n    }\n    return str;\n  }\n}\n","import { TimelineGroupStyle } from '../styles/timelineGroupStyle';\nexport const defaultRowHeight = 24;\nconst margin = 4;\nexport const defaultGroupStyle = {\n  height: 'auto',\n  marginTop: margin,\n  /**\n   * Default group fill color.\n   */\n  fillColor: '#094771',\n} as TimelineGroupStyle;\n","import { TimelineKeyframeShape } from '../../enums/timelineKeyframeShape';\nimport { TimelineKeyframeStyle } from '../styles/timelineKeyframeStyle';\n\nexport const defaultTimelineKeyframeStyle = {\n  /**\n   * keyframe fill color.\n   */\n  fillColor: 'DarkOrange',\n  shape: TimelineKeyframeShape.Rhomb,\n  /**\n   * Selected keyframe fill color.\n   */\n  selectedFillColor: 'red',\n  strokeColor: 'black',\n  selectedStrokeColor: 'black',\n  strokeThickness: 0.2,\n  height: 'auto',\n  width: 'auto',\n} as TimelineKeyframeStyle;\n","import { TimelineRowStyle } from '../styles/timelineRowStyle';\nimport { defaultGroupStyle, defaultRowHeight } from './defaultGroupStyle';\nimport { defaultTimelineKeyframeStyle } from './defaultTimelineKeyframeStyle';\n\nexport const defaultTimelineRowStyle = {\n  /**\n   * Row height in pixels.\n   */\n  height: defaultRowHeight,\n  marginBottom: 2,\n  fillColor: '#252526',\n  /**\n   * Style for the all keyframes in a current row.\n   * Individual keyframe can have own style.\n   */\n  keyframesStyle: defaultTimelineKeyframeStyle,\n  /**\n   * Style of the groups.\n   */\n  groupsStyle: defaultGroupStyle,\n} as TimelineRowStyle;\n","import { TimelineOptions } from '../settings/timelineOptions';\nimport { TimelineRowStyle } from '../settings/styles/timelineRowStyle';\nimport { TimelineKeyframeShape } from '../enums/timelineKeyframeShape';\nimport { TimelineUtils } from './timelineUtils';\nimport { TimelineGroupStyle } from '../settings/styles/timelineGroupStyle';\nimport { TimelineKeyframe } from '../models/timelineKeyframe';\n\nimport { TimelineGroup } from '../models/timelineGroup';\nimport { TimelineRow } from '../models/timelineRow';\nimport { defaultGroupStyle } from '../settings/defaults/defaultGroupStyle';\nimport { defaultTimelineKeyframeStyle } from '../settings/defaults/defaultTimelineKeyframeStyle';\nimport { defaultTimelineRowStyle } from '../settings/defaults/defaultTimelineRowStyle';\n\nconst undefinedConst = typeof undefined;\n\n// TODO: create merged style for each element instead of getting per property.\nexport class TimelineStyleUtils {\n  static getGroup(groupModel: TimelineGroup | string | null | undefined): TimelineGroup | null {\n    const style = groupModel;\n    if (style && typeof style === 'string') {\n      return null;\n    }\n    return (style || null) as TimelineGroup;\n  }\n  static getGroupStyle(groupModel: TimelineGroup | string | null | undefined): TimelineGroupStyle | null {\n    return TimelineStyleUtils.getGroup(groupModel)?.style || null;\n  }\n  static getFirstSet<T>(defaultValue: T, ...params: Array<T | undefined | null>): T {\n    return TimelineStyleUtils.getValue(defaultValue, false, ...params);\n  }\n  /**\n   * Get first value set or default.\n   * @param defaultValue default value in a case when no value is set.\n   * @param returnFalseIfAnyFalse - find first negative bool and return false.\n   * @param params collection of values to check.\n   * @returns value.\n   */\n  static getValue<T>(defaultValue: T, returnFalseIfAnyFalse = false, ...params: Array<T | undefined | null>): T {\n    const valuesFound: T[] = [];\n    let found = false;\n    params.forEach((value: T | undefined | null) => {\n      if (found) {\n        return;\n      }\n      if (typeof value === undefinedConst) {\n        return;\n      } else if (typeof value === 'number') {\n        if (!TimelineUtils.isNumber(value)) {\n          return;\n        }\n      } else if (typeof value === 'boolean') {\n        valuesFound.push(value as T);\n        // No need to search for other values. First false is turning off current bool functionality.\n        if (returnFalseIfAnyFalse && value === false) {\n          found = true;\n        }\n        return;\n      } else if (!value) {\n        return;\n      }\n      valuesFound.push(value as T);\n    });\n    const toReturn = valuesFound && valuesFound.length > 0 ? valuesFound[0] : defaultValue;\n    if (found) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      return false as T;\n    }\n    return TimelineStyleUtils.getValueOrDefault(toReturn, defaultValue) as T;\n  }\n\n  static getValueOrDefault<T>(value: T, defaultValue: T): T | undefined {\n    if (typeof value === undefinedConst) {\n      return defaultValue;\n    } else if (typeof value == 'boolean') {\n      // variable is a boolean\n      return value as T;\n    } else if (typeof value == 'number') {\n      // variable is a boolean\n      if (value || value === 0) {\n        return value as T;\n      } else {\n        return defaultValue;\n      }\n    }\n    return value || defaultValue;\n  }\n  static keyframeWidth(\n    keyframe: TimelineKeyframe | null | undefined,\n    group: TimelineGroup | string | null | undefined,\n    rowStyle: TimelineRowStyle | null | undefined,\n    options: TimelineOptions | null | undefined,\n  ): number | string {\n    return TimelineStyleUtils.getFirstSet(\n      // default value\n      defaultTimelineKeyframeStyle.width || '',\n      keyframe?.style?.width,\n      // exact style\n      TimelineStyleUtils.getGroupStyle(group)?.keyframesStyle?.width,\n      rowStyle?.keyframesStyle?.width,\n      rowStyle?.groupsStyle?.keyframesStyle?.width,\n      // global styles\n      options?.rowsStyle?.groupsStyle?.keyframesStyle?.width,\n      // default keyframe style\n      options?.rowsStyle?.keyframesStyle?.width,\n    );\n  }\n  static keyframeHeight(\n    keyframe: TimelineKeyframe | null | undefined,\n    group: TimelineGroup | string | null | undefined,\n    rowStyle: TimelineRowStyle | null | undefined,\n    options: TimelineOptions | null | undefined,\n  ): number | string {\n    return TimelineStyleUtils.getFirstSet(\n      // default value\n      defaultTimelineKeyframeStyle.height || '',\n      keyframe?.style?.height,\n      // exact style\n      TimelineStyleUtils.getGroupStyle(group)?.keyframesStyle?.height,\n      rowStyle?.keyframesStyle?.height,\n      rowStyle?.groupsStyle?.keyframesStyle?.height,\n      // global styles\n      options?.rowsStyle?.groupsStyle?.keyframesStyle?.height,\n      // default keyframe style\n      options?.rowsStyle?.keyframesStyle?.height,\n    );\n  }\n  static keyframeShape(keyframe: TimelineKeyframe | null, group: TimelineGroup | string | null | undefined, rowStyle: TimelineRowStyle | null, options: TimelineOptions | null): TimelineKeyframeShape {\n    const defaultValue = defaultTimelineKeyframeStyle.shape || TimelineKeyframeShape.Rhomb;\n    return TimelineStyleUtils.getFirstSet(\n      // default value\n      defaultValue,\n      // exact style\n      keyframe?.style?.shape,\n      // style set by keyframe group\n      TimelineStyleUtils.getGroupStyle(group)?.keyframesStyle?.shape,\n      // style from the keyframe group\n      rowStyle?.groupsStyle?.keyframesStyle?.shape,\n      // style set by keyframe style\n      rowStyle?.keyframesStyle?.shape,\n      // style set by keyframe group style, applied when group is set\n      group ? options?.rowsStyle?.groupsStyle?.keyframesStyle?.shape : undefined,\n      // Style set by global options\n      options?.rowsStyle?.keyframesStyle?.shape,\n    );\n  }\n  static keyframeFillColor(keyframe: TimelineKeyframe | null, group: TimelineGroup | string | null | undefined, rowStyle: TimelineRowStyle | null, options: TimelineOptions | null): string {\n    const defaultValue = defaultTimelineKeyframeStyle.fillColor || '';\n    return TimelineStyleUtils.getFirstSet(\n      // default value\n      defaultValue,\n      // exact style\n      keyframe?.style?.fillColor,\n      // style set by keyframe group\n      TimelineStyleUtils.getGroupStyle(group)?.keyframesStyle?.fillColor,\n      // style from the keyframe group\n      rowStyle?.groupsStyle?.keyframesStyle?.fillColor,\n      // style set by keyframe style\n      rowStyle?.keyframesStyle?.fillColor,\n      // style set by keyframe group style, applied when group is set\n      group ? options?.rowsStyle?.groupsStyle?.keyframesStyle?.fillColor : undefined,\n      // Style set by global options\n      options?.rowsStyle?.keyframesStyle?.fillColor,\n    );\n  }\n  static keyframeSelectedFillColor(keyframe: TimelineKeyframe | null, group: TimelineGroup | string | null | undefined, rowStyle: TimelineRowStyle | null, options: TimelineOptions | null): string {\n    const defaultValue = defaultTimelineKeyframeStyle.selectedFillColor || '';\n    return TimelineStyleUtils.getFirstSet(\n      // default value\n      defaultValue,\n      // exact style\n      keyframe?.style?.selectedFillColor,\n      // style set by keyframe group\n      TimelineStyleUtils.getGroupStyle(group)?.keyframesStyle?.selectedFillColor,\n      // style from the keyframe group\n      rowStyle?.groupsStyle?.keyframesStyle?.selectedFillColor,\n      // style set by keyframe style\n      rowStyle?.keyframesStyle?.selectedFillColor,\n      // style set by keyframe group style, applied when group is set\n      group ? options?.rowsStyle?.groupsStyle?.keyframesStyle?.selectedFillColor : undefined,\n      // Style set by global options\n      options?.rowsStyle?.keyframesStyle?.selectedFillColor,\n    );\n  }\n\n  static keyframeStrokeThickness(keyframe: TimelineKeyframe | null, group: TimelineGroup | string | null | undefined, rowStyle: TimelineRowStyle | null, options: TimelineOptions | null): number {\n    const defaultValue = defaultTimelineKeyframeStyle.strokeThickness || 0;\n    return TimelineStyleUtils.getFirstSet(\n      // default value\n      defaultValue,\n      // exact style\n      keyframe?.style?.strokeThickness,\n      // style set by keyframe group\n      TimelineStyleUtils.getGroupStyle(group)?.keyframesStyle?.strokeThickness,\n      // style from the keyframe group\n      rowStyle?.groupsStyle?.keyframesStyle?.strokeThickness,\n      // style set by keyframe style\n      rowStyle?.keyframesStyle?.strokeThickness,\n      // style set by keyframe group style, applied when group is set\n      group ? options?.rowsStyle?.groupsStyle?.keyframesStyle?.strokeThickness : undefined,\n      // Style set by global options\n      options?.rowsStyle?.keyframesStyle?.strokeThickness,\n    );\n  }\n\n  static keyframeStrokeColor(keyframe: TimelineKeyframe | null, group: TimelineGroup | string | null | undefined, rowStyle: TimelineRowStyle | null, options: TimelineOptions | null): string {\n    const defaultValue = defaultTimelineKeyframeStyle.strokeColor || '';\n    return TimelineStyleUtils.getFirstSet(\n      // default value\n      defaultValue,\n      // exact style\n      keyframe?.style?.strokeColor,\n      // style set by keyframe group\n      TimelineStyleUtils.getGroupStyle(group)?.keyframesStyle?.strokeColor,\n      // style from the keyframe group\n      rowStyle?.groupsStyle?.keyframesStyle?.strokeColor,\n      // style set by keyframe style\n      rowStyle?.keyframesStyle?.strokeColor,\n      // style set by keyframe group style, applied when group is set\n      group ? options?.rowsStyle?.groupsStyle?.keyframesStyle?.strokeColor : undefined,\n      // Style set by global options\n      options?.rowsStyle?.keyframesStyle?.strokeColor,\n    );\n  }\n  static keyframeSelectedStrokeColor(keyframe: TimelineKeyframe | null, group: TimelineGroup | string | null, rowStyle: TimelineRowStyle | null, options: TimelineOptions | null): string {\n    const defaultValue = defaultTimelineKeyframeStyle.selectedStrokeColor || '';\n    return TimelineStyleUtils.getFirstSet(\n      // default value\n      defaultValue,\n      // exact style\n      keyframe?.style?.selectedStrokeColor,\n      // style set by keyframe group\n      TimelineStyleUtils.getGroupStyle(group)?.keyframesStyle?.selectedStrokeColor,\n      // style from the keyframe group\n      rowStyle?.groupsStyle?.keyframesStyle?.selectedStrokeColor,\n      // style set by keyframe style\n      rowStyle?.keyframesStyle?.selectedStrokeColor,\n      // style set by keyframe group style, applied when group is set\n      group ? options?.rowsStyle?.groupsStyle?.keyframesStyle?.selectedStrokeColor : undefined,\n      // Style set by global options\n      options?.rowsStyle?.keyframesStyle?.selectedStrokeColor,\n    );\n  }\n\n  static groupHeight(options: TimelineOptions | null | undefined, group: TimelineGroup | string | null | undefined, rowStyle: TimelineRowStyle | null | undefined): number | string {\n    return TimelineStyleUtils.getFirstSet(\n      // default value\n      defaultGroupStyle.height || 'auto',\n      // exact group style\n      TimelineStyleUtils.getGroupStyle(group)?.height,\n      // Row row style\n      rowStyle?.groupsStyle?.height,\n      // global styles\n      options?.rowsStyle?.groupsStyle?.height,\n    );\n  }\n\n  static groupMarginTop(options: TimelineOptions | null | undefined, group: TimelineGroup | string | null | undefined, rowStyle: TimelineRowStyle | null | undefined): number | string {\n    return TimelineStyleUtils.getFirstSet(\n      // default value\n      defaultGroupStyle.marginTop || 'auto',\n      // exact style\n      TimelineStyleUtils.getGroupStyle(group)?.marginTop,\n      // Row row style\n      rowStyle?.groupsStyle?.marginTop,\n      // global styles\n      options?.rowsStyle?.groupsStyle?.marginTop,\n    );\n  }\n\n  static groupFillColor(options: TimelineOptions | null | undefined, group: TimelineGroup | string | null | undefined, rowStyle: TimelineRowStyle | null | undefined): string {\n    return TimelineStyleUtils.getFirstSet(\n      // default value\n      defaultGroupStyle.fillColor || '',\n      // exact style\n      TimelineStyleUtils.getGroupStyle(group)?.fillColor,\n      // Row row style\n      rowStyle?.groupsStyle?.fillColor,\n      // global styles\n      options?.rowsStyle?.groupsStyle?.fillColor,\n    );\n  }\n  static groupStrokeColor(options: TimelineOptions | null | undefined, group: TimelineGroup | string | null | undefined, rowStyle: TimelineRowStyle | null | undefined): string {\n    return TimelineStyleUtils.getFirstSet(\n      // default value\n      defaultGroupStyle.strokeColor || '',\n      // exact style\n      TimelineStyleUtils.getGroupStyle(group)?.strokeColor,\n      // Row row style\n      rowStyle?.groupsStyle?.strokeColor,\n      // global styles\n      options?.rowsStyle?.groupsStyle?.strokeColor,\n    );\n  }\n\n  static groupStrokeThickness(options: TimelineOptions | null | undefined, group: TimelineGroup | string | null | undefined, rowStyle: TimelineRowStyle | null | undefined): number {\n    return (\n      TimelineStyleUtils.getFirstSet(\n        // default value\n        defaultGroupStyle.strokeThickness || '',\n        // exact style\n        TimelineStyleUtils.getGroupStyle(group)?.strokeThickness,\n        // Row row style\n        rowStyle?.groupsStyle?.strokeThickness,\n        // global styles\n        options?.rowsStyle?.groupsStyle?.strokeThickness,\n      ) || 0\n    );\n  }\n\n  static groupsRadii(\n    options: TimelineOptions | null | undefined,\n    group: TimelineGroup | string | null | undefined,\n    rowStyle: TimelineRowStyle | null | undefined,\n  ): number | DOMPointInit | Iterable<number | DOMPointInit> {\n    return (\n      TimelineStyleUtils.getFirstSet(\n        // default value\n        defaultGroupStyle.radii || '',\n        // exact style\n        TimelineStyleUtils.getGroupStyle(group)?.radii,\n        // Row row style\n        rowStyle?.groupsStyle?.radii,\n        // global styles\n        options?.rowsStyle?.groupsStyle?.radii,\n      ) || 0\n    );\n  }\n\n  /**\n   * Get current row height from styles\n   */\n  static getRowHeight(rowStyle: TimelineRowStyle | null, options: TimelineOptions | null): number {\n    const defaultValue = defaultTimelineRowStyle.height || 0;\n    return TimelineStyleUtils.getFirstSet(\n      // default value\n      defaultValue,\n      // exact style\n      rowStyle?.height,\n      // Style set by global options\n      options?.rowsStyle?.height,\n    );\n  }\n  static getRowMarginBottom(rowStyle: TimelineRowStyle | null, options: TimelineOptions | null): number {\n    const defaultValue = defaultTimelineRowStyle.marginBottom || 0;\n    return TimelineStyleUtils.getFirstSet(\n      // default value\n      defaultValue,\n      // exact style\n      rowStyle?.marginBottom,\n      // Style set by global options\n      options?.rowsStyle?.marginBottom,\n    );\n  }\n\n  static getRowFillColor(rowStyle: TimelineRowStyle | null, options: TimelineOptions | null): string {\n    const defaultValue = defaultTimelineRowStyle.fillColor || '';\n    return TimelineStyleUtils.getFirstSet(\n      // default value\n      defaultValue,\n      // exact style\n      rowStyle?.fillColor,\n      // Style set by global options\n      options?.rowsStyle?.fillColor,\n    );\n  }\n\n  static headerHeight(options: TimelineOptions | null, defaultRowHeight = 30): number {\n    return options?.headerHeight || defaultRowHeight;\n  }\n  static keyframeDraggable(keyframe: TimelineKeyframe | null, group: TimelineGroup | string | null, row: TimelineRow | null, options: TimelineOptions | null, defaultValue = true): boolean {\n    const findFirstNegativeBool = true;\n    const boolResult = TimelineStyleUtils.getValue<boolean>(\n      defaultValue,\n      findFirstNegativeBool,\n      // Keyframe settings\n      keyframe?.draggable,\n      // Group settings\n      TimelineStyleUtils.getGroup(group)?.keyframesDraggable,\n      // Row settings\n      row?.keyframesDraggable,\n      // Start from global settings first.\n      options?.keyframesDraggable,\n    );\n    return boolResult;\n  }\n\n  static groupDraggable(group: TimelineGroup | string | null | undefined, row: TimelineRow | null, options: TimelineOptions): boolean {\n    const findFirstNegativeBool = true;\n    const boolResult = TimelineStyleUtils.getValue<boolean>(\n      true,\n      findFirstNegativeBool,\n      // Group settings\n      TimelineStyleUtils.getGroup(group)?.draggable,\n      // Row settings\n      row?.groupsDraggable,\n      // Start from global settings first.\n      options?.groupsDraggable,\n    );\n    return boolResult;\n  }\n}\n","/**\n * Internal element type.\n */\nexport enum TimelineElementType {\n  /**\n   * Timeline\n   */\n  Timeline = 'timeline',\n  /**\n   * Timeline\n   */\n  DurationLine = 'durationLine',\n  /**\n   * Keyframes\n   */\n  Keyframe = 'keyframe',\n  /**\n   * Keyframes connected and presenting one group.\n   */\n  Group = 'group',\n  /**\n   * Timeline row.\n   */\n  Row = 'row',\n  None = 'none',\n}\n","import { TimelineElementType } from '../enums/timelineElementType';\nimport { TimelineElementDragState } from './timelineElementDragState';\n\n/**\n * Information about current drag state.\n */\nexport class TimelineDraggableData {\n  /**\n   * Whether position was changed.\n   */\n  changed = false;\n  /**\n   * Drag initial click target.\n   */\n  target!: TimelineElementDragState;\n  /**\n   * Elements to be dragged.\n   * Can be multiple elements, but drag will be started with target.\n   */\n  elements!: TimelineElementDragState[];\n  /**\n   * Dragging type.\n   */\n  type: TimelineElementType = TimelineElementType.None;\n  /**\n   * Prev value.\n   */\n  val!: number;\n  /**\n   * Prev value.\n   */\n  prevVal!: number;\n}\n","/**\n * Timeline base preventable event.\n */\nexport class TimelineBaseEvent {\n  private _prevented = false;\n  /**\n   * Prevent default click logic.\n   */\n  preventDefault(): void {\n    this._prevented = true;\n  }\n\n  isPrevented(): boolean {\n    return this._prevented;\n  }\n}\n","import { TimelineBaseEvent } from './timelineBaseEvent';\nimport { TimelineElement } from '../timelineElement';\nimport { TimelineEventSource } from '../../enums/timelineEventSource';\n\nexport class TimelineKeyframeChangedEvent extends TimelineBaseEvent {\n  /**\n   * Value to be used.\n   */\n  val!: number;\n  /**\n   * Previous value.\n   */\n  prevVal!: number;\n  /**\n   * Target element\n   */\n  target!: TimelineElement;\n  /**\n   * Event source.\n   */\n  source!: TimelineEventSource;\n}\n","export enum TimelineEventSource {\n  /**\n   * Changed by user interaction events.\n   */\n  User = 'user',\n  /**\n   * Changed programmatically.\n   */\n  Programmatically = 'programmatically',\n  /**\n   * Changed by the set time function.\n   */\n  SetTimeMethod = 'setTimeMethod',\n}\n","import { TimelineBaseEvent } from './timelineBaseEvent';\nimport { TimelineEventSource } from '../../enums/timelineEventSource';\n\nexport class TimelineTimeChangedEvent extends TimelineBaseEvent {\n  /**\n   * New value to be set if not prevented.\n   */\n  val = 0;\n  /**\n   * previous value, that actually set at the moment.\n   */\n  prevVal = 0;\n  /**\n   * Source of the change.\n   */\n  source: TimelineEventSource = TimelineEventSource.User;\n}\n","/**\n * Timeline selection event type.\n */\nexport enum TimelineSelectionEventSource {\n  /**\n   * Keyframe selection is performed.\n   */\n  Keyframes = 'keyframes',\n}\n","import { TimelineSelectionEventSource } from '../../enums/timelineSelectionEventSource';\nimport { TimelineKeyframe } from '../../models/timelineKeyframe';\n\nexport class TimelineSelectedEvent {\n  /**\n   * Selected Keyframes list.\n   */\n  selected: TimelineKeyframe[] = [];\n  /**\n   * Changed selection.\n   */\n  changed: TimelineKeyframe[] = [];\n  /**\n   * Selection mode.\n   */\n  mode: TimelineSelectionEventSource = TimelineSelectionEventSource.Keyframes;\n}\n","import { TimelineElement } from '../timelineElement';\nimport { TimelinePoint } from '../timelinePoint';\nimport { TimelineBaseEvent } from './timelineBaseEvent';\n\nexport class TimelineClickEvent extends TimelineBaseEvent {\n  args: MouseEvent | TouchEvent | null = null;\n  /**\n   * Clicked screen position.\n   */\n  get pos(): DOMPoint | null {\n    return this.point?.pos || null;\n  }\n  get val(): number {\n    if (this.point) {\n      return this.point.val;\n    }\n    return NaN;\n  }\n  /**\n   * All elements located under current mouse activity.\n   */\n  elements: TimelineElement[] = [];\n  /**\n   * Element that selected as target under the click.\n   */\n  target: TimelineElement | null = null;\n  /**\n   * Timeline current active drag position.\n   */\n  point: TimelinePoint | null = null;\n}\n","import { TimelinePoint } from '../timelinePoint';\nimport { TimelineBaseEvent } from './timelineBaseEvent';\nimport { TimelineElementDragState } from '../timelineElementDragState';\n\nexport class TimelineDragEvent extends TimelineBaseEvent {\n  args: MouseEvent | TouchEvent | null = null;\n  get pos(): DOMPoint | null {\n    return this.point?.pos || null;\n  }\n  /**\n   * Elements to be dragged as a group.\n   */\n  elements: TimelineElementDragState[] | null = null;\n  /**\n   * Target element\n   */\n  target: TimelineElementDragState | null = null;\n  /**\n   * Timeline current active drag position.\n   */\n  point: TimelinePoint | null = null;\n  /**\n   * Timeline previous drag position.\n   */\n  prevPoint: TimelinePoint | null = null;\n}\n","export enum TimelineInteractionMode {\n  /**\n   * Keyframe selection tool selecting single or group of keyframes.\n   */\n  Selection = 'selection',\n  /**\n   * Pan tool with the possibility to select keyframes.\n   */\n  Pan = 'pan',\n  /**\n   * Allow only pan without any keyframes interaction.\n   * Timeline still can be moved and controlled by option 'timelineDraggable'.\n   */\n  NonInteractivePan = 'nonInteractivePan',\n  /**\n   * Zoom tool.\n   */\n  Zoom = 'zoom',\n\n  /**\n   * No iteraction, except moving a timeline.\n   * Timeline still can be moved and controlled by option 'timelineDraggable'.\n   */\n  None = 'none',\n}\n","export enum TimelineCursorType {\n  Alias = 'alias',\n  AllScroll = 'all-scroll',\n  Auto = 'auto',\n  Cell = 'cell',\n  ContextMenu = 'context-menu',\n  ColResize = 'col-resize',\n  Copy = 'copy',\n  Crosshair = 'crosshair',\n  Default = 'default',\n  EResize = 'e-resize',\n  EWResize = 'ew-resize',\n  Grab = 'grab',\n  Grabbing = 'grabbing',\n  Help = 'help',\n  Move = 'move',\n  NResize = 'n-resize',\n  NEResize = 'ne-resize',\n  NESWResize = 'nesw-resize',\n  NSResize = 'ns-resize',\n  NWResize = 'nw-resize',\n  NWSEResize = 'nwse-resize',\n  NoDrop = 'no-drop',\n  None = 'none',\n  NotAllowed = 'not-allowed',\n  Pointer = 'pointer',\n  Progress = 'progress',\n  RowResize = 'row-resize',\n  SResize = 's-resize',\n  SEResize = 'se-resize',\n  SWResize = 'sw-resize',\n  Text = 'text',\n  WResize = 'w-resize',\n  Wait = 'wait',\n  ZoomIn = 'zoom-in',\n  ZoomOut = 'zoom-out',\n}\n","export enum TimelineCapShape {\n  None = 'none',\n  Triangle = 'triangle',\n  Rect = 'rect',\n}\n","/**\n * Timeline selection mode.\n */\nexport enum TimelineSelectionMode {\n  /**\n   * Select new items. deselect changed.\n   */\n  Normal = 'normal',\n  /**\n   * Append current selection.\n   */\n  Append = 'append',\n  /**\n   * Revert selection of a specified nodes.\n   */\n  Revert = 'revert',\n}\n","/**\n * Event names of the component.\n */\nexport enum TimelineEvents {\n  Selected = 'selected',\n  TimeChanged = 'timechanged',\n  DurationChanged = 'durationChanged',\n  KeyframeChanged = 'keyframeChanged',\n  DragStarted = 'dragStarted',\n  Drag = 'drag',\n  DragFinished = 'dragFinished',\n  Scroll = 'scroll',\n  ScrollFinished = 'scrollFinished',\n  ContextMenu = 'onContextMenu',\n  DoubleClick = 'doubleClick',\n  MouseDown = 'mouseDown',\n  KeyDown = 'keyDown',\n  KeyUp = 'keyUp',\n  KeyPress = 'keyPress',\n  ZoomChanged = 'zoomChanged',\n}\n","export enum TimelineScrollSource {\n  DefaultMode = 'none',\n  ZoomMode = 'zoom',\n  ScrollBySelection = 'scrollBySelection',\n}\n","import { TimelineConsts } from '../timelineConsts';\n\nexport const defaultTimelineConsts: TimelineConsts = {\n  /**\n   * Private. Auto pan speed.\n   */\n  autoPanSpeed: 50,\n  /**\n   * Private. scroll speed when mouse drag is used (from 0 to 1)\n   */\n  scrollByDragSpeed: 0.12,\n  /**\n   * Private. Determine whether item was clicked.\n   */\n  clickDetectionMs: 120,\n  /**\n   * Private. Timeout to detect double click.\n   */\n  doubleClickTimeoutMs: 400,\n  /**\n   * Private. Time in ms used to refresh scrollbars when pan is finished.\n   */\n  scrollFinishedTimeoutMs: 500,\n  /**\n   * Private. Auto pan padding\n   */\n  autoPanByScrollPadding: 10,\n  /**\n   * Private. Click threshold\n   */\n  clickThreshold: 3,\n  /**\n   * Private. Private.Click min radius for the elements detection.\n   */\n  clickDetectionMinRadius: 2,\n  /**\n   * Private. Skip some auto pan/scroll actions if they are executed more rapid than this value.\n   */\n  autoPanSpeedLimit: 10,\n  /**\n   * Private. Default auto size for the group. It's percents.\n   */\n  defaultGroupHeight: 0.7,\n} as TimelineConsts;\n","import { TimelineCapShape } from '../../enums/timelineCapShape';\nimport { TimelineCursorType } from '../../enums/timelineCursorType';\nimport { TimelineStyle } from '../styles/timelineStyle';\n\nexport const defaultTimelineStyle = {\n  width: 2,\n  marginTop: 15,\n  marginBottom: 0,\n  strokeColor: 'DarkOrange',\n  fillColor: 'DarkOrange',\n  capStyle: {\n    width: 4,\n    height: 10,\n    /**\n     * Draw timeline rectangular cap.\n     */\n    capType: TimelineCapShape.Rect,\n    strokeColor: 'DarkOrange',\n    fillColor: 'DarkOrange',\n  },\n  cursor: TimelineCursorType.EWResize,\n} as TimelineStyle;\n","import { TimelineOptions } from '../timelineOptions';\nimport { defaultGroupStyle } from './defaultGroupStyle';\nimport { defaultTimelineKeyframeStyle } from './defaultTimelineKeyframeStyle';\nimport { defaultTimelineRowStyle } from './defaultTimelineRowStyle';\nimport { defaultTimelineStyle } from './defaultTimelineStyle';\n\nexport const defaultTimelineOptions = {\n  /**\n   *  Snap all selected keyframes as a bundle during the drag.\n   */\n  snapAllKeyframesOnMove: false,\n\n  /**\n   * Check whether snapping is enabled.\n   */\n  snapEnabled: true,\n\n  /**\n   * Timeline style.\n   */\n  timelineStyle: defaultTimelineStyle,\n  /**\n   * approximate step for the timeline in pixels for 1 second\n   */\n  stepPx: 120,\n  /**\n   * Number of units that should fit into one stepPx. (1 second by a default)\n   */\n  stepVal: 1000,\n  stepSmallPx: 30,\n  /**\n   * Snap step in units. from 0 to stepVal\n   */\n  snapStep: 200,\n  /**\n   * additional left margin in pixels to start the line gauge from.\n   */\n  leftMargin: 25,\n  headerFillColor: '#101011',\n  fillColor: '#101011',\n\n  labelsColor: '#D5D5D5',\n  /**\n   * Header gauge tick color.\n   */\n  tickColor: '#D5D5D5',\n  /**\n   * Selection rectangle color.\n   */\n  selectionColor: 'White',\n\n  /**\n   * Default rows style.\n   * Can be overridden by setting style individually for each row.\n   */\n  rowsStyle: defaultTimelineRowStyle,\n\n  /**\n   * Style for the all keyframes in a current row.\n   * Individual keyframe can have own style.\n   */\n  keyframesStyle: defaultTimelineKeyframeStyle,\n  /**\n   * Style of the groups.\n   */\n  groupsStyle: defaultGroupStyle,\n  /**\n   * Header height in pixels\n   */\n  headerHeight: 30,\n  font: '11px sans-serif',\n  /**\n   * Default zoom level = 1. where screen pixels are equals to the corresponding stepVal stepPx.\n   */\n  zoom: 1,\n  /**\n   * Default zoom speed.\n   */\n  zoomSpeed: 0.1,\n  /**\n   * Max zoom value.\n   */\n  zoomMin: 0.1,\n  /**\n   * Min zoom value.\n   */\n  zoomMax: 8,\n  /**\n   * Set this to true in a MAC OS environment: The Meta key will be used instead of the Ctrl key.\n   */\n  controlKeyIsMetaKey: false,\n  /**\n   * Access the scroll container via this class for e.g. scroll bar styling.\n   */\n  scrollContainerClass: 'scroll-container',\n  /**\n   * keyframes group is draggable.\n   */\n  groupsDraggable: true,\n  /**\n   * keyframes are draggable.\n   */\n  keyframesDraggable: true,\n  /**\n   * Timeline can be dragged or position can be changed by user interaction. Default: true\n   */\n  timelineDraggable: true,\n  /**\n   * Start drawing timeline from this min point.\n   * Bounds for the keyframe dragging.\n   */\n  min: 0,\n  /**\n   * Max bounds timeline can navigate to.\n   */\n  max: Number.MAX_VALUE,\n  /**\n   * Duration of the timeline in milliseconds\n   */\n  totalDuration: 10000,\n} as TimelineOptions;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n// bundle entry point\n\nimport { TimelineEventsEmitter } from './timelineEventsEmitter';\nimport { TimelineConsts } from './settings/timelineConsts';\n\n// @public timeline models\nimport { TimelineRanged } from './models/timelineRanged';\nimport { TimelineModel } from './models/timelineModel';\nimport { TimelineRow } from './models/timelineRow';\nimport { TimelineKeyframe } from './models/timelineKeyframe';\n// @public styles\nimport { TimelineOptions } from './settings/timelineOptions';\n\nimport { TimelineStyleUtils } from './utils/timelineStyleUtils';\nimport { TimelineUtils } from './utils/timelineUtils';\nimport { TimelineElement } from './utils/timelineElement';\n\n// @private helper containers.\nimport { TimelineCutBoundsRectResults } from './utils/timelineCutBoundsRectResults';\nimport { TimelineSelectionResults } from './utils/timelineSelectionResults';\nimport { TimelineMouseData } from './utils/timelineMouseData';\nimport { TimelineElementDragState } from './utils/timelineElementDragState';\nimport { TimelineDraggableData } from './utils/timelineDraggableData';\n\n// @private virtual model\nimport { TimelineGroupViewModel } from './viewModels/timelineGroupViewModel';\nimport { TimelineKeyframeViewModel } from './viewModels/timelineKeyframeViewModel';\nimport { TimelineRowViewModel } from './viewModels/timelineRowViewModel';\nimport { TimelineViewModel } from './viewModels/timelineViewModel';\n\n// @public events\nimport { TimelineKeyframeChangedEvent } from './utils/events/timelineKeyframeChangedEvent';\nimport { TimelineTimeChangedEvent } from './utils/events/timelineTimeChangedEvent';\nimport { TimelineSelectedEvent } from './utils/events/timelineSelectedEvent';\nimport { TimelineScrollEvent } from './utils/events/timelineScrollEvent';\nimport { TimelineClickEvent } from './utils/events/timelineClickEvent';\nimport { TimelineDragEvent } from './utils/events/timelineDragEvent';\n\n// @public enums\nimport { TimelineKeyframeShape } from './enums/timelineKeyframeShape';\nimport { TimelineInteractionMode } from './enums/timelineInteractionMode';\nimport { TimelineElementType } from './enums/timelineElementType';\nimport { TimelineCursorType } from './enums/timelineCursorType';\nimport { TimelineCapShape } from './enums/timelineCapShape';\nimport { TimelineEventSource } from './enums/timelineEventSource';\nimport { TimelineSelectionMode } from './enums/timelineSelectionMode';\nimport { TimelineEvents } from './enums/timelineEvents';\n// @private defaults are exposed:\nimport { TimelineScrollSource } from './enums/timelineScrollSource';\nimport { defaultTimelineConsts } from './settings/defaults/defaultTimelineConsts';\nimport { defaultTimelineOptions } from './settings/defaults/defaultTimelineOptions';\nimport {TimelineCapStyle} from './settings/styles/timelineCapStyle';\n\nexport class Timeline extends TimelineEventsEmitter {\n  /**\n   * component container.\n   */\n  _container: HTMLElement | null = null;\n  /**\n   * Dynamically generated canvas inside of the container.\n   */\n  _canvas: HTMLCanvasElement | null = null;\n  /**\n   * Dynamically generated scroll container.\n   */\n  _scrollContainer: HTMLElement | null = null;\n  /**\n   * Dynamically generated virtual scroll content.\n   * While canvas has no real size, this element is used to create virtual scroll on the parent element.\n   */\n  _scrollContent: HTMLElement | null = null;\n  /**\n   * Rendering context\n   */\n  _ctx: CanvasRenderingContext2D | null = null;\n  /**\n   * Components settings\n   */\n  _options!: TimelineOptions;\n  /**\n   * Drag start position.\n   */\n  _startPosMouseArgs: TimelineMouseData | null = null;\n  /**\n   * Drag scroll started position.\n   */\n  _scrollStartPos: DOMPoint | null = null;\n  /**\n   * Private. Current mouse position that is used to track values between mouse up/down events.\n   * Can be null, use public methods and properties instead.\n   */\n  _currentPos: TimelineMouseData | null = null;\n\n  /**\n   * Private. Current active mouse area selection rectangle displayed during the mouse up/down drag events.\n   */\n  _selectionRect: DOMRect | null = null;\n  /**\n   * Private. Whether selection rectangle is displayed.\n   */\n  _selectionRectEnabled = false;\n  /**\n   * Private. Information in regard of current active drag state.\n   */\n  _drag: TimelineDraggableData | null = null;\n  _startedDragWithCtrl = false;\n  _startedDragWithShiftKey = false;\n  _scrollProgrammatically = false;\n  _clickTimeout: number | null = null;\n  _lastClickTime = 0;\n  _lastClickPoint: DOMPoint | null = null;\n  _consts: TimelineConsts = defaultTimelineConsts;\n  /**\n   * Private. whether click is allowed.\n   */\n  _clickAllowed = false;\n  /**\n   * Private. scroll finished timer reference.\n   */\n  _scrollFinishedTimerRef?: number | null = null;\n  /**\n   * Private.Current timeline position.\n   * Please use public get\\set methods to properly change the timeline position.\n   */\n  _val = 0;\n  /**\n   * Private.Current duration position.\n   * Please use public get\\set methods to properly change the duration position.\n   */\n  _durationVal = 0;\n\n  _pixelRatio = 1;\n  /**\n   * Private. Current zoom level. Please use publicly available properties to set zoom levels.\n   */\n  _currentZoom = 0;\n  /**\n   * Private. Ref for the auto pan scroll interval.\n   */\n  _intervalRef?: number | null = null;\n  /**\n   * Private.\n   * When last auto pan scroll action was started.\n   */\n  _autoPanLastActionDate = 0;\n  /**\n   * Private.\n   * Is pan mouse interactions are started.\n   */\n  _isPanStarted = false;\n  /**\n   * Private.\n   * Component interaction mode. Please use publicly available methods.\n   */\n  _interactionMode = TimelineInteractionMode.Selection;\n\n  _lastUsedArgs: MouseEvent | TouchEvent | null = null;\n  /**\n   * Private.\n   * Current set timeline model.\n   */\n  _model: TimelineModel | null = null;\n  /**\n   * Private.\n   * Indication when scroll are drag or click is started.\n   */\n  _scrollAreaClickOrDragStarted = false;\n  /**\n   * Create Timeline instance\n   * @param options Timeline settings.\n   * @param model Timeline model.\n   */\n  constructor(options: TimelineOptions | null = null, model: TimelineModel | null = null) {\n    super();\n    this._options = TimelineUtils.cloneOptions(defaultTimelineOptions);\n    this._durationVal = options?.totalDuration ?? 0;\n    // Allow to create instance without an error to perform tests.\n    if (options || model) {\n      this.initialize(options, model);\n    }\n  }\n\n  /**\n   * Initialize Timeline\n   * @param options Timeline settings.\n   * @param model Timeline model.\n   */\n  public initialize = (options: TimelineOptions | null, model: TimelineModel | null): void => {\n    this._model = model;\n    if (!options || !options.id) {\n      throw new Error(`Element cannot be empty. Should be string or DOM element.`);\n    }\n\n    this._generateContainers(options.id);\n    this._options = TimelineUtils.cloneOptions(defaultTimelineOptions);\n    if (options) {\n      this._options = this._setOptions(options);\n    }\n    this._subscribeComponentEvents();\n    this.rescale();\n    this.redraw();\n  };\n\n  /**\n   * Generate component html.\n   * @param id container.\n   */\n  _generateContainers = (id: string | HTMLElement): void => {\n    if (id instanceof HTMLElement) {\n      this._container = id as HTMLElement;\n    } else {\n      this._container = document.getElementById(id);\n    }\n\n    if (!this._container) {\n      throw new Error(`Element cannot be empty. Should be string or DOM element.`);\n    }\n\n    this._scrollContainer = document.createElement('div');\n    this._scrollContent = document.createElement('div');\n    this._canvas = document.createElement('canvas');\n\n    if (!this._canvas || !this._canvas.getContext) {\n      console.log('Cannot initialize canvas context.');\n      return;\n    }\n    this._container.innerHTML = '';\n    this._container.style.position = 'relative';\n    // Generate size container:\n    this._canvas.style.cssText =\n      'image-rendering: -moz-crisp-edges;' +\n      'image-rendering: -webkit-crisp-edges;' +\n      'image-rendering: pixelated;' +\n      'image-rendering: crisp-edges;' +\n      'user-select: none;' +\n      '-webkit-user-select: none;' +\n      '-khtml-user-select: none;' +\n      '-moz-user-select: none;' +\n      '-o-user-select: none;' +\n      'user-select: none;' +\n      'touch-action: none;' +\n      'position: relative;' +\n      '-webkit-user-drag: none;' +\n      '-khtml-user-drag: none;' +\n      '-moz-user-drag: none;' +\n      '-o-user-drag: none;' +\n      'user-drag: none;' +\n      'padding: inherit';\n\n    // Those styles are hardcoded and required for the proper scrolling.\n    this._scrollContainer.style.cssText = 'overflow: scroll;' + 'position: absolute;' + 'width:  100%;' + 'height:  100%;';\n    this._scrollContent.style.width = this._scrollContent.style.height = '100%';\n\n    // add the text node to the created div\n    this._scrollContainer.appendChild(this._scrollContent);\n    this._container.appendChild(this._scrollContainer);\n    const scrollBarWidth = this._scrollContainer.offsetWidth - this._scrollContent.clientWidth;\n    // Calculate current browser scrollbar size and add offset for the canvas\n    this._canvas.style.width = this._canvas.style.height = 'calc(100% -' + (scrollBarWidth || 17) + 'px)';\n\n    this._container.appendChild(this._canvas);\n    this._ctx = this._getCtx();\n  };\n  /**\n   * Get drawing context\n   */\n  _getCtx(): CanvasRenderingContext2D | null {\n    if (!this._canvas) {\n      return null;\n    }\n    if (this._ctx) {\n      return this._ctx;\n    }\n    this._ctx = this._canvas.getContext('2d');\n    return this._ctx;\n  }\n  /**\n   * Subscribe current component on the related events.\n   * Private. Use initialize method instead.\n   */\n  _subscribeComponentEvents = (): void => {\n    // Allow to call event multiple times, revoke current subscription and subscribe again.\n    this._unsubscribeComponentEvents();\n    if (!this._container || !this._scrollContainer || !this._canvas) {\n      throw Error(`Cannot subscribe on scroll events while one of the containers is null or empty. Please call initialize method first`);\n    }\n    if (this._container) {\n      this._container.addEventListener('wheel', this._handleWheelEvent);\n    }\n    if (this._scrollContainer) {\n      this._scrollContainer.addEventListener('scroll', this._handleScrollEvent);\n      this._scrollContainer.addEventListener('touchstart', this._handleScrollMouseDownEvent);\n      this._scrollContainer.addEventListener('mousedown', this._handleScrollMouseDownEvent);\n    }\n    document.addEventListener('keyup', this._handleKeyUp, false);\n    document.addEventListener('keydown', this._handleKeyDown, false);\n    window.addEventListener('blur', this._handleBlurEvent, false);\n    window.addEventListener('resize', this._handleWindowResizeEvent, false);\n    if (this._canvas) {\n      this._canvas.addEventListener('touchstart', this._handleMouseDownEvent, false);\n      this._canvas.addEventListener('mousedown', this._handleMouseDownEvent, false);\n      this._canvas.addEventListener('contextmenu', this._handleContextMenu, false);\n    }\n    window.addEventListener('mousemove', this._handleMouseMoveEvent, false);\n    window.addEventListener('touchmove', this._handleMouseMoveEvent, false);\n    window.addEventListener('mouseup', this._handleMouseUpEvent, false);\n    window.addEventListener('touchend', this._handleMouseUpEvent, false);\n  };\n\n  /**\n   * Private. Use dispose method instead.\n   */\n  _unsubscribeComponentEvents = (): void => {\n    this._container?.removeEventListener('wheel', this._handleWheelEvent);\n\n    if (this._scrollContainer) {\n      this._scrollContainer.removeEventListener('scroll', this._handleScrollEvent);\n      this._scrollContainer.removeEventListener('touchstart', this._handleScrollMouseDownEvent);\n      this._scrollContainer.removeEventListener('mousedown', this._handleScrollMouseDownEvent);\n    } else {\n      console.warn(`Cannot unsubscribe scroll while it's already empty`);\n    }\n    window.removeEventListener('blur', this._handleBlurEvent);\n    window.removeEventListener('resize', this._handleWindowResizeEvent);\n    document.removeEventListener('keydown', this._handleKeyDown);\n    document.removeEventListener('keyup', this._handleKeyUp);\n    if (this._canvas) {\n      this._canvas.removeEventListener('touchstart', this._handleMouseDownEvent);\n      this._canvas.removeEventListener('mousedown', this._handleMouseDownEvent);\n      this._canvas.removeEventListener('contextmenu', this._handleContextMenu);\n    } else {\n      console.warn(`Cannot unsubscribe canvas while it's already empty`);\n    }\n    window.removeEventListener('mousemove', this._handleMouseMoveEvent);\n    window.removeEventListener('touchmove', this._handleMouseMoveEvent);\n    window.removeEventListener('mouseup', this._handleMouseUpEvent);\n    window.removeEventListener('touchend', this._handleMouseUpEvent);\n  };\n  /**\n   * Dispose current component: unsubscribe component and user events.\n   */\n  public dispose = (): void => {\n    // Unsubscribe all user events.\n    this.offAll();\n    // Stop times\n    this._stopAutoPan();\n    this._clearScrollFinishedTimer();\n    this._unsubscribeComponentEvents();\n    if (this._container) {\n      this._container.innerHTML = '';\n    }\n    this._container = null;\n    this._canvas = null;\n    this._scrollContainer = null;\n    this._scrollContent = null;\n    this._ctx = null;\n    this._cleanUpSelection();\n  };\n  /**\n   * On key up is received.\n   */\n  _handleKeyUp = (event: KeyboardEvent): void => {\n    if (this._interactionMode === TimelineInteractionMode.Zoom) {\n      this._setZoomCursor(event);\n    }\n  };\n  /**\n   * On key down is received.\n   */\n  _handleKeyDown = (event: KeyboardEvent): void => {\n    if (this._interactionMode === TimelineInteractionMode.Zoom) {\n      this._setZoomCursor(event);\n    }\n\n    super.emit(TimelineEvents.KeyDown, event);\n  };\n  _setZoomCursor = (e: MouseEvent | KeyboardEvent): void => {\n    if (this._controlKeyPressed(e)) {\n      this._setCursor(TimelineCursorType.ZoomOut);\n    } else {\n      this._setCursor(TimelineCursorType.ZoomIn);\n    }\n  };\n  _handleBlurEvent = (): void => {\n    this._cleanUpSelection(true);\n  };\n  _handleWindowResizeEvent = (): void => {\n    // Rescale and redraw\n    this.rescale();\n    this.redraw();\n  };\n\n  _clearScrollFinishedTimer = (): void => {\n    if (this._scrollFinishedTimerRef) {\n      clearTimeout(this._scrollFinishedTimerRef);\n      this._scrollFinishedTimerRef = null;\n    }\n  };\n  _handleScrollMouseDownEvent = (): void => {\n    this._scrollAreaClickOrDragStarted = true;\n  };\n  _handleScrollEvent = (args: Event): void => {\n    const scrollProgrammatically = this._scrollProgrammatically;\n    if (this._scrollProgrammatically) {\n      this._scrollProgrammatically = false;\n    }\n    // Stop previous running timeout.\n    this._clearScrollFinishedTimer();\n    // Set a timeout to run event 'scrolling end'.\n    // Auto scroll is used to repeat scroll when drag element or select items outside of the visible area.\n    this._scrollFinishedTimerRef = window.setTimeout(() => {\n      if (!this._isPanStarted) {\n        this._clearScrollFinishedTimer();\n\n        this.rescale();\n        this.redraw();\n      }\n      this._emitScrollEvent(args, scrollProgrammatically, TimelineEvents.ScrollFinished);\n    }, this._consts.scrollFinishedTimeoutMs);\n\n    this.redraw();\n    this._emitScrollEvent(args, scrollProgrammatically);\n  };\n  _controlKeyPressed = (e: MouseEvent | KeyboardEvent | TouchEvent): boolean => {\n    if (!this._options || this._options.controlKeyIsMetaKey === undefined) {\n      return e.metaKey || e.ctrlKey;\n    }\n    return this._options.controlKeyIsMetaKey || this._options.controlKeyIsMetaKey ? e.metaKey : e.ctrlKey;\n  };\n  _handleWheelEvent = (event: WheelEvent): void => {\n    if (!this._scrollContainer || !this._canvas) {\n      // Component is not initialized yet.\n      return;\n    }\n    if (this._controlKeyPressed(event)) {\n      event.preventDefault();\n      this._zoom(TimelineUtils.sign(event.deltaY), this._options.zoomSpeed || 0, 0);\n    } else {\n      if (this._options.disableScrollY !== true) {\n        this.scrollTop = this._scrollContainer.scrollTop + event.deltaY;\n      }\n      this.scrollLeft = this._scrollContainer.scrollLeft + event.deltaX;\n      event.preventDefault();\n    }\n  };\n  _zoom = (direction: number, speed: number, x: number): void => {\n    if (speed && speed > 0 && speed <= 1) {\n      const diff = this._canvasClientWidth() / x;\n      const val = this._fromScreen(x);\n      const zoom = direction * this._currentZoom * speed;\n      //this._options.zoom\n      const prevZoom = this._currentZoom;\n      this._currentZoom = this._setZoom(this._currentZoom + zoom);\n      // Don't update scroll if zoom didn't change (hit min/max bound)\n      if (this._currentZoom === prevZoom) {\n        return;\n      }\n      // Get only after zoom is set\n      const zoomCenter = this.valToPx(val);\n      let newScrollLeft = Math.round(zoomCenter - this._canvasClientWidth() / diff);\n      if (newScrollLeft <= 0) {\n        newScrollLeft = 0;\n      }\n\n      this._rescaleInternal(newScrollLeft + this._canvasClientWidth(), null, TimelineScrollSource.ZoomMode);\n      this.scrollLeft = newScrollLeft;\n\n      this.redraw();\n    }\n  };\n  /**\n   * Zoom in\n   * @param speed value from 0 to 1\n   */\n  public zoomIn = (speed = this._options.zoomSpeed): void => {\n    const width = this._scrollContainer?.clientWidth || 0;\n    if (speed && width) {\n      this._zoom(1, speed, width / 2);\n    }\n  };\n  /**\n   * Zoom out.\n   * @param speed value from 0 to 1\n   */\n  public zoomOut = (speed = this._options.zoomSpeed): void => {\n    const width = this._scrollContainer?.clientWidth || 0;\n    if (speed && width) {\n      this._zoom(-1, speed, width / 2);\n    }\n  };\n  /**\n   * Set direct zoom value.\n   * @param zoom zoom value to set. percent 0-1 and etc.\n   * @param min min zoom.\n   * @param max max zoom.\n   * @return normalized value.\n   */\n  _setZoom = (zoom: number, min: number | null | undefined = null, max: number | null | undefined = null): number => {\n    min = TimelineUtils.isNumber(min) ? min : this._options?.zoomMin;\n    max = TimelineUtils.isNumber(max) ? max : this._options?.zoomMax;\n    if (TimelineUtils.isNumber(zoom)) {\n      zoom = TimelineUtils.keepInBounds(zoom, min, max);\n      zoom = zoom || 1;\n      const timelineEvent = new TimelineTimeChangedEvent();\n      timelineEvent.val = zoom;\n      timelineEvent.prevVal = this._currentZoom;\n      this.emit(TimelineEvents.ZoomChanged, timelineEvent);\n      this._currentZoom = zoom;\n      return zoom;\n    }\n\n    return zoom;\n  };\n\n  /**\n   * Set direct zoom value.\n   * @public\n   * @param zoom zoom value to set. percent 0-1 and etc.\n   * @return normalized value.\n   */\n  setZoom = (zoom: number): number => {\n    const prevZoom = this.getZoom();\n    if (prevZoom !== zoom) {\n      const zoomSet = this._setZoom(zoom);\n      if (prevZoom != zoomSet) {\n        // Get only after zoom is set\n        const zoomCenter = this.valToPx(this._val);\n        let newScrollLeft = Math.round(zoomCenter - this._canvasClientWidth() * zoom);\n        if (newScrollLeft <= 0) {\n          newScrollLeft = 0;\n        }\n\n        this._rescaleInternal(newScrollLeft + this._canvasClientWidth(), null, TimelineScrollSource.ZoomMode);\n        this.scrollLeft = newScrollLeft;\n        this.redraw();\n        return zoomSet;\n      }\n    }\n    return prevZoom;\n  };\n  /**\n   * Get current zoom level.\n   */\n  getZoom = (): number => {\n    if (TimelineUtils.isNumber(this._currentZoom)) {\n      return this._currentZoom || 1;\n    }\n    return 1;\n  };\n  _getClickDetectionRadius = (point: TimelineMouseData): number => {\n    const defaultValue = this._consts.clickDetectionMinRadius || 1;\n    return Math.max(defaultValue, point?.radius || defaultValue);\n  };\n\n  _handleContextMenu = (args: MouseEvent | TouchEvent): void => {\n    // Prevent drag of the canvas if canvas is selected as text:\n    TimelineUtils.clearBrowserSelection();\n    if (!this._canvas || !this._scrollContainer) {\n      this._cleanUpSelection();\n      return;\n    }\n    const mousePosTimeline = this._trackMousePos(this._canvas, args);\n\n    const clickRadius = this._getClickDetectionRadius(mousePosTimeline);\n    const elements = this.elementFromPoint(mousePosTimeline.pos, clickRadius, []);\n\n    const target = this._findDraggableElement(elements, mousePosTimeline.val);\n    // Create click event\n    const event = new TimelineClickEvent();\n    event.point = mousePosTimeline;\n    event.args = args;\n    // all elements under the click:\n    event.elements = elements;\n    // target element.\n    event.target = target;\n\n    console.log('_handleContextMenu', TimelineEvents.ContextMenu);\n    super.emit(TimelineEvents.ContextMenu, event);\n  };\n\n  /**\n   * @param args\n   */\n  _handleMouseDownEvent = (args: MouseEvent | TouchEvent): void => {\n    // Prevent drag of the canvas if canvas is selected as text:\n    TimelineUtils.clearBrowserSelection();\n    if (!this._canvas || !this._scrollContainer) {\n      this._cleanUpSelection();\n      return;\n    }\n    this._startPosMouseArgs = this._trackMousePos(this._canvas, args);\n\n    if (!this._startPosMouseArgs) {\n      return;\n    }\n    let isDoubleClick = Date.now() - this._lastClickTime < this._consts.doubleClickTimeoutMs;\n    // Don't allow to perform double click if mouse was moved to far.\n    if (\n      this._lastClickPoint &&\n      this._startPosMouseArgs &&\n      TimelineUtils.getDistance(this._lastClickPoint.x, this._lastClickPoint.y, this._startPosMouseArgs.pos.x, this._startPosMouseArgs.pos.y) > this._consts.clickThreshold\n    ) {\n      isDoubleClick = false;\n    }\n\n    this._lastClickPoint = this._startPosMouseArgs.pos;\n    this._scrollStartPos = { x: this._scrollContainer.scrollLeft, y: this._scrollContainer.scrollTop } as DOMPoint;\n    this._clickAllowed = true;\n    let onlyElements: TimelineElementType[] | null = null;\n    if (this._interactionMode === TimelineInteractionMode.NonInteractivePan || this._interactionMode === TimelineInteractionMode.None) {\n      // Allow to select only timeline. Timeline position can be disabled/enabled by properties.\n      onlyElements = [TimelineElementType.Timeline, TimelineElementType.DurationLine];\n    }\n    const clickRadius = this._getClickDetectionRadius(this._startPosMouseArgs);\n    const elements = this.elementFromPoint(this._startPosMouseArgs.pos, clickRadius, onlyElements);\n\n    const target = this._findDraggableElement(elements, this._startPosMouseArgs.val);\n    // Create click event\n    const event = new TimelineClickEvent();\n    event.point = this._startPosMouseArgs;\n    event.args = args;\n    // all elements under the click:\n    event.elements = elements;\n    // target element.\n    event.target = target;\n\n    if (isDoubleClick) {\n      super.emit(TimelineEvents.DoubleClick, event);\n      return;\n    }\n\n    super.emit(TimelineEvents.MouseDown, event);\n\n    this._clickTimeout = Date.now();\n    this._lastClickTime = Date.now();\n    if (event.isPrevented()) {\n      // Mouse up will be also prevented\n      this._cleanUpSelection();\n      return;\n    }\n\n    this._currentPos = this._startPosMouseArgs;\n\n    // Select keyframes on mouse down\n    if (target && this._interactionMode !== TimelineInteractionMode.Zoom) {\n      this._drag = new TimelineDraggableData();\n      this._drag.val = target.val;\n      this._drag.type = target.type;\n      this._drag.target = this._setElementDragState(target, target.val);\n\n      if (target.type === TimelineElementType.Keyframe) {\n        this._startedDragWithCtrl = this._controlKeyPressed(args);\n        this._startedDragWithShiftKey = args.shiftKey;\n        // get all related selected keyframes if we are selecting one.\n        if (target?.keyframe && !target?.keyframe?.selected && !this._controlKeyPressed(args)) {\n          this._selectInternal(target.keyframe);\n        }\n        // Allow to drag all selected keyframes on a screen\n        this._drag.elements = this.getSelectedElements().map((element) => {\n          return this._setElementDragState(element, element.val);\n        });\n      } else if (target.type === TimelineElementType.Group) {\n        const keyframes = this._drag.target.keyframes;\n\n        if (keyframes && Array.isArray(keyframes)) {\n          this._drag.elements = keyframes.map((keyframe) => {\n            return this._setElementDragState(this._convertToTimelineElement(this._drag?.target.row || null, keyframe), keyframe.val);\n          });\n        }\n      } else {\n        this._drag.elements = [this._drag.target];\n      }\n    }\n\n    this.redraw();\n  };\n  _setElementDragState = (element: TimelineElement | TimelineElementDragState, val: number): TimelineElementDragState => {\n    const state = element as TimelineElementDragState;\n    state.prevVal = state.val;\n    if (state.startedVal === undefined || state.startedVal === null) {\n      state.startedVal = val;\n    }\n    if (state.prevVal === undefined || state.prevVal === null) {\n      state.prevVal = val;\n    }\n    state.val = val;\n    return state;\n  };\n  /**\n   * Check is mouse left button is clicked.\n   */\n  isLeftButtonClicked = (args: MouseEvent | TouchEvent | any): boolean => {\n    return !!args && args.buttons == 1;\n  };\n\n  /**\n   * Browser mouse move handler.\n   */\n  _handleMouseMoveEvent = (args: MouseEvent | TouchEvent | null): void => {\n    if (!args) {\n      args = this._lastUsedArgs;\n    } else {\n      this._lastUsedArgs = args;\n    }\n    if (!args || !this._canvas) {\n      return;\n    }\n    const touchEventArgs = args as TouchEvent;\n    const isTouch = touchEventArgs.changedTouches && touchEventArgs.changedTouches.length > 0;\n    this._currentPos = this._trackMousePos(this._canvas, args);\n    if (!this._isPanStarted && this._selectionRect && this._clickTimeoutIsOver()) {\n      // TODO: implement selection by rect\n      if (this._interactionMode === TimelineInteractionMode.None || this._interactionMode === TimelineInteractionMode.Zoom || this._interactionMode === TimelineInteractionMode.NonInteractivePan) {\n        this._selectionRectEnabled = false;\n      } else {\n        this._selectionRectEnabled = true;\n      }\n    } else {\n      this._selectionRectEnabled = false;\n    }\n\n    args = args as MouseEvent;\n    const isLeftClicked = this.isLeftButtonClicked(args);\n    if (!isLeftClicked) {\n      this._scrollAreaClickOrDragStarted = false;\n    }\n    // On dragging is started.\n    if (this._startPosMouseArgs) {\n      // On left button is on hold by the user\n      if (isLeftClicked || isTouch) {\n        if (this._drag && !this._startedDragWithCtrl) {\n          const convertedVal = this._currentPos.val;\n          if (this._drag.type === TimelineElementType.DurationLine) {\n            this._setDurationInternal(convertedVal, TimelineEventSource.User);\n          } else if (this._drag.type === TimelineElementType.Timeline) {\n            this._setTimeInternal(convertedVal, TimelineEventSource.User);\n          } else if ((this._drag.type == TimelineElementType.Keyframe || this._drag.type == TimelineElementType.Group) && this._drag.elements) {\n            const offset = Math.floor(convertedVal - this._drag.val);\n            const movedOffset = this._moveElements(offset, this._drag.elements, TimelineEventSource.User);\n            if (movedOffset !== 0) {\n              if (!this._drag.changed) {\n                this._drag.prevVal = this._drag.val;\n                const eventArgs = this._emitDragStartedEvent(this._drag);\n                if (!eventArgs || eventArgs.isPrevented()) {\n                  // Cleanup drag here, so drag finished will be ignored.\n                  this._cleanUpSelection(true);\n                  this._drag = null;\n                  return;\n                }\n              }\n\n              this._drag.changed = true;\n              this._drag.val += offset;\n              this._emitDragEvent(this._drag);\n            }\n          }\n        }\n\n        // If max limit defined in no case allow the user to go beyond the limit.\n        if (this._durationVal > 0 && (this._currentPos.val < this._durationVal || this._options.max === null || this._options.max === undefined)) {\n          if ((this._interactionMode === TimelineInteractionMode.Pan || this._interactionMode === TimelineInteractionMode.NonInteractivePan) && !this._drag) {\n            this._isPanStarted = true;\n            this._setCursor(TimelineCursorType.Grabbing);\n            // Track scroll by drag.\n            this._scrollByPan(this._startPosMouseArgs.pos, this._currentPos.pos, this._scrollStartPos);\n          } else {\n            if (this._interactionMode !== TimelineInteractionMode.None) {\n              // Track scroll by mouse or touch out of the area.\n              this._scrollBySelectionOutOfBounds(this._currentPos.pos);\n            }\n          }\n        }\n\n        this.redraw();\n      } else {\n        // Fallback. Cancel mouse move when focus was lost and mouse down is still counted.\n        this._cleanUpSelection(true);\n        this.redraw();\n      }\n    } else if (!isTouch) {\n      // Set mouse over cursors\n      let onlyElements: TimelineElementType[] | null = null;\n      if (this._interactionMode === TimelineInteractionMode.NonInteractivePan || this._interactionMode === TimelineInteractionMode.None) {\n        // Allow to select only timeline. Timeline position can be disabled/enabled by properties.\n        onlyElements = [TimelineElementType.Timeline, TimelineElementType.DurationLine];\n      }\n      const clickRadius = this._getClickDetectionRadius(this._currentPos);\n      const elements = this.elementFromPoint(this._currentPos.pos, clickRadius, onlyElements);\n      const target = this._findDraggableElement(elements, this._currentPos.val);\n      if (this._isPanStarted || this._interactionMode === TimelineInteractionMode.Pan || this._interactionMode === TimelineInteractionMode.NonInteractivePan) {\n        if (isLeftClicked) {\n          this._setCursor(TimelineCursorType.Grabbing);\n        } else {\n          this._setCursor(TimelineCursorType.Grab);\n        }\n      } else {\n        if (this._interactionMode === TimelineInteractionMode.Zoom) {\n          this._setZoomCursor(args);\n          return;\n        } else {\n          this._setCursor(TimelineCursorType.Default);\n        }\n      }\n\n      if (target) {\n        let cursor: TimelineCursorType | null = null;\n        if (target.type === TimelineElementType.Group) {\n          cursor = cursor || TimelineCursorType.EWResize;\n        } else if (target.type == TimelineElementType.Keyframe) {\n          cursor = cursor || TimelineCursorType.Pointer;\n        } else if (target.type == TimelineElementType.Timeline || target.type === TimelineElementType.DurationLine) {\n          cursor = cursor || this._options?.timelineStyle?.cursor || null;\n        }\n\n        if (cursor) {\n          this._setCursor(cursor);\n        }\n      }\n    }\n\n    if (isTouch) {\n      args.preventDefault();\n    }\n  };\n\n  /**\n   * Move elements\n   * @param offset vector to move elements along.\n   * @param elements Element to move.\n   * @returns real moved value.\n   */\n  _moveElements(offset: number, elements: TimelineElementDragState[], source: TimelineEventSource = TimelineEventSource.Programmatically): number {\n    if (!elements) {\n      return 0;\n    }\n    let isChanged = false;\n    if (Math.abs(offset) > 0) {\n      // Find drag min and max bounds:\n      let bounds = { min: Number.MIN_SAFE_INTEGER, max: Number.MAX_SAFE_INTEGER } as TimelineRanged;\n      // Set min max from the options.\n      bounds = TimelineUtils.setMinMax(bounds, this._options);\n      elements.forEach((p) => {\n        if (!p || !p.keyframe) {\n          return;\n        }\n        // find allowed bounds for the draggable items.\n        // find for each row and keyframe separately.\n        const currentBounds = TimelineUtils.setMinMax(TimelineUtils.setMinMax({ min: bounds.min, max: bounds.max }, p.keyframe), p.row || null);\n        const expectedKeyframeValue = this._options?.snapAllKeyframesOnMove ? this.snapVal(p.keyframe.val) : p.keyframe.val;\n        const newPosition = expectedKeyframeValue + offset;\n        // Check that move offset will hit min bounds\n        if ((currentBounds.min || currentBounds.min === 0) && TimelineUtils.isNumber(currentBounds.min) && newPosition < currentBounds.min) {\n          // Return to the bounds:\n          offset = offset + TimelineUtils.getDistance(currentBounds.min, newPosition);\n        }\n        if ((currentBounds.max || currentBounds.max === 0) && TimelineUtils.isNumber(currentBounds.max) && newPosition > currentBounds.max) {\n          // Return to the bounds:\n          offset = offset - TimelineUtils.getDistance(currentBounds.max, newPosition);\n        }\n      });\n\n      if (Math.abs(offset) > 0) {\n        // don't allow to move less than zero offset.\n        elements.forEach((element) => {\n          if (!element?.keyframe) {\n            return;\n          }\n          const prevVal = element.keyframe.val;\n          const toSet = prevVal + offset;\n          const newValue = this._setKeyframePos(element, toSet, source);\n          isChanged = newValue !== prevVal;\n        });\n      }\n\n      if (isChanged) {\n        return offset;\n      }\n    }\n\n    return 0;\n  }\n\n  /**\n   * Mouse up handler.\n   */\n  _handleMouseUpEvent = (args: MouseEvent | TouchEvent): void => {\n    this._scrollAreaClickOrDragStarted = false;\n    if (!this._canvas) {\n      return;\n    }\n    if (this._startPosMouseArgs) {\n      //window.releaseCapture();\n      const pos = this._trackMousePos(this._canvas, args);\n\n      // Click detection.\n      if (this._clickAllowed || !this._clickTimeoutIsOver() || (this._drag && (this._startedDragWithCtrl || this._startedDragWithShiftKey))) {\n        if (this._options && this._interactionMode === TimelineInteractionMode.Zoom) {\n          const direction = this._controlKeyPressed(args) ? 1 : -1;\n          const mouseArgs = this._getMousePos(this._canvas, args);\n          const mousePos = Math.max(0, mouseArgs.pos.x || 0);\n          this._zoom(direction, this._options.zoomSpeed || 0, mousePos);\n        } else {\n          this._performClick(pos, this._drag);\n        }\n      } else if (!this._drag && this._selectionRect && this._selectionRectEnabled) {\n        if (this._interactionMode === TimelineInteractionMode.Zoom) {\n          // TODO: implement zoom by screen rect.\n        } else if (this._interactionMode !== TimelineInteractionMode.None) {\n          const keyframes = this._getKeyframesByRectangle(this._selectionRect);\n          const selectionMode = args.shiftKey ? TimelineSelectionMode.Append : TimelineSelectionMode.Normal;\n          this.select(keyframes, selectionMode);\n        }\n      }\n\n      this._cleanUpSelection();\n      this.redraw();\n    }\n  };\n\n  /**\n   * Canvas client height.\n   */\n  _canvasClientHeight = (): number => {\n    if (this._canvas) {\n      return this._canvas.clientHeight;\n    }\n    return 0;\n  };\n\n  /**\n   * Canvas client width.\n   */\n  _canvasClientWidth = (): number => {\n    if (this._canvas) {\n      return this._canvas.clientWidth;\n    }\n    return 0;\n  };\n\n  /**\n   * Get all keyframes under the screen rectangle.\n   * @param screenRect screen coordinates to get keyframes.\n   */\n  _getKeyframesByRectangle = (screenRect: DOMRect): TimelineKeyframe[] => {\n    const keyframesModels: Array<TimelineKeyframe> = [];\n    this._forEachKeyframe((keyframeViewModel) => {\n      const intersects =\n        keyframeViewModel.shape === TimelineKeyframeShape.Rect\n          ? TimelineUtils.isRectIntersects(keyframeViewModel.size, screenRect)\n          : TimelineUtils.isOverlap(keyframeViewModel.size.x, keyframeViewModel.size.y, screenRect);\n\n      if (intersects) {\n        keyframesModels.push(keyframeViewModel.model);\n      }\n    });\n    return keyframesModels;\n  };\n\n  /**\n   * Private.\n   * Perform timeline click.\n   */\n  _performClick = (pos: TimelineMouseData, drag: TimelineDraggableData | null): boolean => {\n    let isChanged = false;\n    if (drag && drag.type === TimelineElementType.Keyframe) {\n      let mode = TimelineSelectionMode.Normal;\n      if (this._startedDragWithCtrl && this._controlKeyPressed(pos.args)) {\n        if (this._controlKeyPressed(pos.args)) {\n          mode = TimelineSelectionMode.Revert;\n        }\n      } else if (this._startedDragWithShiftKey && pos.args.shiftKey) {\n        mode = TimelineSelectionMode.Append;\n      }\n      // Reverse selected keyframe selection by a click:\n      isChanged = this._selectInternal(drag?.target?.keyframe || null, mode).selectionChanged || isChanged;\n\n      if (pos.args.shiftKey && this._options?.timelineDraggable !== false) {\n        // Set current timeline position if it's not a drag or selection rect small or fast click.\n        isChanged = this._setTimeInternal(pos.val, TimelineEventSource.User) || isChanged;\n      }\n    } else {\n      // deselect keyframes if any:\n      isChanged = this._selectInternal(null).selectionChanged || isChanged;\n\n      if (this._options?.timelineDraggable !== false) {\n        const headerHeight = TimelineStyleUtils.headerHeight(this._options);\n        if (pos.pos.y < headerHeight) {\n          // Set current timeline position if it's not a drag or selection rect small or fast click.\n          isChanged = this._setTimeInternal(pos.val, TimelineEventSource.User) || isChanged;\n        }\n      }\n    }\n\n    return isChanged;\n  };\n  /**\n   * Set keyframe value.\n   * @param keyframe\n   * @param value\n   * @return set value.\n   */\n  _setKeyframePos = (element: TimelineElementDragState, value: number, source: TimelineEventSource = TimelineEventSource.Programmatically): number => {\n    if (!element || !element.keyframe) {\n      return value;\n    }\n    value = Math.floor(value);\n    if (element.keyframe && element.keyframe.val != value) {\n      element.prevVal = element.val;\n      element.val = value;\n      element.keyframe.val = value;\n      const event = this._emitKeyframeChanged(element, source);\n      if (event.isPrevented()) {\n        element.val = event.prevVal;\n        element.keyframe.val = event.prevVal;\n      }\n\n      return value;\n    }\n\n    return value;\n  };\n\n  /**\n   * @param cursor to set.\n   */\n  _setCursor = (cursor: string): void => {\n    if (this._canvas && this._canvas.style.cursor != cursor) {\n      this._canvas.style.cursor = cursor;\n    }\n  };\n\n  /**\n   * Set component interaction mode.\n   */\n  public setInteractionMode = (mode: TimelineInteractionMode): void => {\n    if (this._interactionMode != mode) {\n      this._interactionMode = mode;\n      // Avoid any conflicts with other modes, clean current state.\n      this._cleanUpSelection(true);\n      this.redraw();\n    }\n  };\n  /**\n   * Get current interaction mode.\n   */\n  public getInteractionMode = (): TimelineInteractionMode => {\n    return this._interactionMode;\n  };\n  /**\n   * Private.\n   * Helper method. Convert model element  to timeline element.\n   */\n  _convertToTimelineElement = (rowModel: TimelineRow | null, keyframe: TimelineKeyframe): TimelineElement => {\n    const data = {\n      type: TimelineElementType.Keyframe,\n      val: keyframe.val,\n      keyframe: keyframe,\n      row: rowModel,\n    } as TimelineElement;\n    return data;\n  };\n\n  public getSelectedKeyframes = (): TimelineKeyframe[] => {\n    const selected = this.getSelectedElements();\n    return selected.map((p) => p.keyframe) as TimelineKeyframe[];\n  };\n\n  /**\n   * Get selected timeline elements.\n   */\n  public getSelectedElements = (): TimelineElement[] => {\n    const selected: TimelineElement[] = [];\n    this._forEachKeyframe((keyframe): void => {\n      if (keyframe && keyframe.model.selected) {\n        selected.push(this._convertToTimelineElement(keyframe.rowViewModel.model, keyframe.model));\n      }\n      return;\n    });\n\n    return selected;\n  };\n  /**\n   * Get all keyframe models available in the model.\n   */\n  public getAllKeyframes = (): TimelineKeyframe[] => {\n    const keyframes: TimelineKeyframe[] = [];\n    this._forEachKeyframe((keyframe): void => {\n      keyframes.push(keyframe.model);\n    });\n\n    return keyframes;\n  };\n\n  public selectAllKeyframes = (): TimelineSelectionResults => {\n    return this.select(this.getAllKeyframes(), TimelineSelectionMode.Normal);\n  };\n  public deselectAll = (): TimelineSelectionResults => {\n    return this.select(null);\n  };\n\n  private _changeNodeState = (state: TimelineSelectionResults, node: TimelineKeyframe, value: boolean): boolean => {\n    if (node.selected !== value) {\n      const selectable = typeof node.selectable === 'boolean' ? node.selectable : true;\n      if (!value || (value && selectable)) {\n        node.selected = value;\n        state.changed.push(node);\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  public select = (nodes: TimelineKeyframe[] | TimelineKeyframe | null, mode = TimelineSelectionMode.Normal): TimelineSelectionResults => {\n    const results = this._selectInternal(nodes, mode);\n    if (results.selectionChanged) {\n      this.redraw();\n    }\n    return results;\n  };\n\n  /**\n   * Select keyframes\n   * @param nodes keyframe or list of the keyframes to be selected.\n   * @param mode selection mode.\n   */\n  public _selectInternal = (nodes: TimelineKeyframe[] | TimelineKeyframe | null, mode = TimelineSelectionMode.Normal): TimelineSelectionResults => {\n    if (!nodes) {\n      nodes = [];\n    }\n    if (!Array.isArray(nodes)) {\n      nodes = [nodes];\n    }\n\n    const state = {\n      selectionChanged: false,\n      selected: this.getSelectedKeyframes(),\n      changed: [] as Array<any>,\n    } as TimelineSelectionResults;\n    const nodesArray = nodes as TimelineKeyframe[];\n    //const state = this.selectedSubject.getValue();\n    if (nodesArray && mode === TimelineSelectionMode.Append) {\n      nodes.forEach((node) => {\n        const changed = this._changeNodeState(state, node, true);\n        if (changed && node.selected) {\n          state.selected.push(node);\n        }\n      });\n    } else if (nodesArray && mode === TimelineSelectionMode.Revert) {\n      nodes.forEach((node) => {\n        if (state.selected.indexOf(node) >= 0) {\n          this._changeNodeState(state, node, false);\n          TimelineUtils.deleteElement<TimelineKeyframe>(state.selected, node);\n        } else {\n          this._changeNodeState(state, node, true);\n          if (node.selected) {\n            state.selected.push(node);\n          }\n        }\n      });\n    } else if (mode === TimelineSelectionMode.Normal) {\n      const selectedItems: Array<TimelineKeyframe> = [];\n      if (nodes) {\n        nodes.forEach((node) => {\n          this._changeNodeState(state, node, true);\n          if (node.selected) {\n            selectedItems.push(node);\n          }\n        });\n      }\n\n      state.selected.forEach((node) => {\n        const exists = nodesArray.indexOf(node) >= 0;\n        // Deselect\n        if (!exists) {\n          this._changeNodeState(state, node, false);\n        }\n      });\n\n      if (state.changed.length > 0) {\n        if (selectedItems) {\n          state.selected = selectedItems;\n        } else {\n          state.selected.length = 0;\n        }\n      }\n    }\n\n    if (state.changed.length > 0) {\n      state.selectionChanged = true;\n      this._emitKeyframesSelected(state);\n    }\n\n    return state;\n  };\n\n  /**\n   * foreach visible keyframe.\n   */\n  _forEachKeyframe(callback: (keyframe: TimelineKeyframeViewModel, index?: number, newRow?: boolean) => void, onRowCallback?: (rowViewModel: TimelineRowViewModel) => void): void {\n    if (!callback && !onRowCallback) {\n      return;\n    }\n    if (!this._model) {\n      return;\n    }\n\n    const calculatedModel = this._generateViewModel();\n    if (!calculatedModel) {\n      return;\n    }\n\n    calculatedModel?.rowsViewModels?.forEach((rowViewModel) => {\n      if (!rowViewModel) {\n        return;\n      }\n      onRowCallback && onRowCallback(rowViewModel);\n      let nextRow = true;\n      if (callback) {\n        rowViewModel.keyframesViewModels.forEach((keyframeViewModel, keyframeIndex) => {\n          if (keyframeViewModel) {\n            callback(keyframeViewModel, keyframeIndex, nextRow);\n          }\n\n          nextRow = false;\n        });\n      }\n    });\n  }\n\n  /**\n   * Private.\n   * Create extended mouse position and calculate size of the selection rectangle.\n   */\n  _trackMousePos(canvas: HTMLCanvasElement, mouseArgs: MouseEvent | TouchEvent): TimelineMouseData {\n    const clickArgs = this._getMousePos(canvas, mouseArgs);\n    const pos = clickArgs.pos;\n    clickArgs.originalVal = this._mousePosToVal(pos.x, false);\n    clickArgs.snapVal = this._mousePosToVal(pos.x, true);\n    clickArgs.val = clickArgs.originalVal;\n    if (this._options && this._options.snapEnabled) {\n      clickArgs.val = clickArgs.snapVal;\n    }\n\n    if (this._startPosMouseArgs) {\n      if (!this._selectionRect) {\n        this._selectionRect = {} as DOMRect;\n      }\n      const startPos = this._startPosMouseArgs.pos;\n      // get the pos with the virtualization:\n      const x = Math.floor(startPos.x + ((this._scrollStartPos?.x || 0) - this.scrollLeft));\n      const y = Math.floor(startPos.y + ((this._scrollStartPos?.y || 0) - this.scrollTop));\n      this._selectionRect.x = Math.min(x, pos.x);\n      this._selectionRect.y = Math.min(y, pos.y);\n      this._selectionRect.width = Math.max(x, pos.x) - this._selectionRect.x;\n      this._selectionRect.height = Math.max(y, pos.y) - this._selectionRect.y;\n      // Once mouse was moved outside of the bounds it's not a click anymore\n      if (this._clickAllowed) {\n        this._clickAllowed = this._selectionRect.height <= this._consts.clickThreshold && this._selectionRect.width <= this._consts.clickThreshold;\n      }\n    }\n\n    return clickArgs;\n  }\n\n  /**\n   * Get scroll container client width.\n   */\n  getClientWidth(): number {\n    return this._scrollContainer?.clientWidth || 0;\n  }\n  /**\n   * Get scroll container client height.\n   */\n  getClientHeight(): number {\n    return this._scrollContainer?.clientHeight || 0;\n  }\n  _cleanUpSelection(forcePrevent = false): void {\n    if (this._drag) {\n      this._emitDragFinishedEvent(this._drag, forcePrevent);\n    }\n    this._startPosMouseArgs = null;\n    this._drag = null;\n    this._scrollAreaClickOrDragStarted = false;\n    this._startedDragWithCtrl = false;\n    this._startedDragWithShiftKey = false;\n    this._selectionRect = null;\n    this._clickTimeout = null;\n    this._scrollStartPos = null;\n    this._isPanStarted = false;\n    this._clickAllowed = false;\n    this._stopAutoPan();\n  }\n\n  /**\n   * Check whether click timeout is over.\n   */\n  _clickTimeoutIsOver(): boolean {\n    // Duration before the selection can be tracked.\n    if (this._clickTimeout && Date.now() - this._clickTimeout > this._consts.clickDetectionMs) {\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Automatically pan. Scroll canvas when selection is made and mouse outside of the bounds.\n   */\n  _startAutoPan = (): void => {\n    if (this._consts.autoPanSpeed) {\n      if (!this._intervalRef) {\n        // Repeat move calls to\n        this._intervalRef = window.setInterval(() => {\n          this._handleMouseMoveEvent(null);\n        }, this._consts.autoPanSpeed);\n      }\n    }\n  };\n\n  /**\n   * Stop current running auto pan\n   */\n  _stopAutoPan = (): void => {\n    if (this._intervalRef) {\n      clearInterval(this._intervalRef);\n      this._intervalRef = null;\n    }\n\n    this._autoPanLastActionDate = 0;\n  };\n\n  /**\n   * Check whether auto pan should be slowed down a bit.\n   */\n  _checkUpdateSpeedTooFast(): boolean {\n    // Slow down updated a bit.\n    if (this._autoPanLastActionDate && Date.now() - this._autoPanLastActionDate <= this._consts.autoPanSpeedLimit) {\n      return true;\n    }\n\n    this._autoPanLastActionDate = Date.now();\n    return false;\n  }\n\n  /**\n   * Scroll virtual canvas when pan mode is enabled.\n   */\n  _scrollByPan(start: DOMPoint, pos: DOMPoint, scrollStartPos: DOMPoint | null): void {\n    if (!start || !pos || !this._scrollContainer) {\n      return;\n    }\n    let x = 0;\n    let y = 0;\n    if (scrollStartPos) {\n      x = scrollStartPos.x;\n      y = scrollStartPos.y;\n    }\n    const offsetX = Math.round(start.x - pos.x);\n    const newLeft = x + offsetX;\n\n    if (offsetX > 0) {\n      this._rescaleInternal(newLeft + this._canvasClientWidth());\n    }\n\n    if (offsetX > 0 && newLeft + this._canvasClientWidth() >= this._scrollContainer.scrollWidth - 5) {\n      this.scrollLeft = this._scrollContainer.scrollWidth;\n    } else {\n      this.scrollLeft = newLeft;\n    }\n    if (this._options.disableScrollY !== true) {\n      this.scrollTop = Math.round(y + start.y - pos.y);\n    }\n  }\n\n  _scrollBySelectionOutOfBounds(pos: DOMPoint): boolean {\n    if (!this._scrollContainer) {\n      return false;\n    }\n    const x = pos.x;\n    const y = pos.y;\n    let isChanged = false;\n    let speedX = 0;\n    let speedY = 0;\n    // Small offset to start auto pan earlier.\n    const bounds = this._consts.autoPanByScrollPadding;\n    const isLeft = x <= bounds;\n    const isRight = x >= this._canvasClientWidth() - bounds;\n    const isTop = y <= bounds;\n    const isBottom = y >= this._canvasClientHeight() - bounds;\n    let newWidth = null;\n    let newHeight = null;\n    if (isLeft || isRight || isTop || isBottom) {\n      // Auto move init\n      this._startAutoPan();\n\n      if (this._checkUpdateSpeedTooFast()) {\n        return false;\n      }\n\n      const scrollSpeedMultiplier = isNaN(this._consts.scrollByDragSpeed) ? 1 : this._consts.scrollByDragSpeed;\n      if (isLeft) {\n        // Get normalized speed.\n        speedX = -TimelineUtils.getDistance(x, bounds) * scrollSpeedMultiplier;\n      } else if (isRight) {\n        // Get normalized speed:\n        speedX = TimelineUtils.getDistance(x, this._canvasClientWidth() - bounds) * scrollSpeedMultiplier;\n        newWidth = this.scrollLeft + this._canvasClientWidth() + speedX;\n      }\n\n      if (isTop) {\n        // Get normalized speed.\n        speedY = (-TimelineUtils.getDistance(x, bounds) * scrollSpeedMultiplier) / 4;\n      } else if (isBottom) {\n        // Get normalized speed:\n        speedY = (TimelineUtils.getDistance(x, this._canvasClientHeight() - bounds) * scrollSpeedMultiplier) / 4;\n        newHeight = this._scrollContainer.scrollTop + this._canvasClientHeight();\n      }\n    } else {\n      this._stopAutoPan();\n    }\n\n    if (newWidth || newHeight) {\n      this._rescaleInternal(newWidth, newHeight, TimelineScrollSource.ScrollBySelection);\n    }\n\n    if (Math.abs(speedX) > 0) {\n      this.scrollLeft = this._scrollContainer.scrollLeft + speedX;\n      isChanged = true;\n    }\n\n    if (Math.abs(speedY) > 0 && this._options.disableScrollY !== true) {\n      this.scrollTop = this._scrollContainer.scrollTop + speedY;\n      isChanged = true;\n    }\n\n    return isChanged;\n  }\n\n  /**\n   * Convert screen pixel to value.\n   */\n  public pxToVal(px: number): number {\n    if (!this._options) {\n      return px;\n    }\n    let min = this._options.min || 0;\n    if (!TimelineUtils.isNumber(min)) {\n      min = 0;\n    }\n    const stepPx = this._options.stepPx || 0;\n    if (stepPx === 0) {\n      return px;\n    }\n    min *= this._currentZoom || 1;\n    const steps = (this._options.stepVal || 0) * this._currentZoom || 1;\n    const val = min + (px / stepPx) * steps;\n    return val;\n  }\n\n  /**\n   * Convert value to local screen component coordinates.\n   */\n  _toScreenPx = (val: number): number => {\n    return this.valToPx(val) - this.scrollLeft + this._leftMargin();\n  };\n  /**\n   * Convert screen local coordinates to a global value info.\n   */\n  _fromScreen = (px: number): number => {\n    return this.pxToVal(this.scrollLeft + px - this._leftMargin());\n  };\n  /**\n   * Convert area value to global screen pixel coordinates.\n   */\n  public valToPx = (val: number): number => {\n    if (!this._options || !this._options.stepPx) {\n      return val;\n    }\n    let min = this._options.min || 0;\n    if (!TimelineUtils.isNumber(min)) {\n      min = 0;\n    }\n    min *= this._currentZoom || 1;\n    const steps = (this._options.stepVal || 0) * this._currentZoom || 1;\n    return (-min + val) * (this._options.stepPx / steps);\n  };\n\n  /**\n   * Snap a value to a nearest grid point.\n   */\n  public snapVal(val: number): number {\n    // Snap a value if configured.\n    if (this._options && this._options.snapEnabled && this._options.snapStep) {\n      const stops = this._options.snapStep;\n      const step = val / stops;\n      const stepsFit = Math.round(step);\n      const minSteps = Math.abs(this._options.min || 0) / this._options.snapStep;\n      const minOffset = TimelineUtils.sign(this._options.min || 1) * (minSteps - Math.floor(minSteps)) * this._options.snapStep;\n      val = Math.round(minOffset) + Math.round(stepsFit * stops);\n    }\n\n    val = TimelineUtils.keepInBounds(val, this._options.min, this._options.max);\n    return val;\n  }\n\n  /**\n   * Convert mouse position to the timeline units considering all the scrolling and offsets.\n   */\n  _mousePosToVal = (x: number, snapEnabled = false): number => {\n    const mousePos = Math.min(x, this._canvasClientWidth());\n    let convertedVal = this._fromScreen(mousePos);\n    convertedVal = Math.round(convertedVal);\n    if (snapEnabled) {\n      convertedVal = this.snapVal(convertedVal);\n    }\n\n    return convertedVal;\n  };\n\n  /**\n   * Format line gauge text.\n   * Default formatting is HMS\n   * @param ms milliseconds to convert.\n   * @param isSeconds whether seconds are passed.\n   */\n  _formatUnitsText = (ms: number): string => {\n    const sign = TimelineUtils.sign(ms) < 0 ? '-' : '';\n    ms = Math.abs(ms);\n    \n    // Only show whole seconds (1s intervals and above)\n    const totalSeconds = Math.floor(ms / 1000);\n    \n    const hours = Math.floor(totalSeconds / 3600);\n    const minutes = Math.floor((totalSeconds % 3600) / 60);\n    const seconds = totalSeconds % 60;\n    \n    let str = '';\n    \n    if (hours > 0) {\n      // 1 hour or more: 1h30m0s format\n      str = hours + 'h' + minutes + 'm' + seconds + 's';\n    } else if (minutes > 0) {\n      // 1 minute or more: 1m30s format\n      str = minutes + 'm' + seconds + 's';\n    } else {\n      // Under 1 minute: show seconds only\n      str = seconds + 's';\n    }\n    \n    return sign + str;\n  };\n  /**\n   * Left padding of the timeline.\n   */\n  _leftMargin = (): number => {\n    return this._options?.leftMargin || 0;\n  };\n  /**\n   * Private.\n   * Render line gauge ticks.\n   */\n  _renderTicks = (): void => {\n    if (!this._ctx || !this._ctx.canvas || this._ctx.canvas.clientWidth <= 0 || this._ctx.canvas.clientHeight <= 0 || !this._options || !this._options.stepPx) {\n      return;\n    }\n    const screenWidth = this._canvasClientWidth() - this._leftMargin();\n    let from = this.pxToVal(this.scrollLeft);\n    let to = this.pxToVal(this.scrollLeft + screenWidth);\n    if (isNaN(from) || isNaN(to) || from === to) {\n      return;\n    }\n\n    if (to < from) {\n      const wasToVal = to;\n      to = from;\n      from = wasToVal;\n    }\n\n    const valDistance = TimelineUtils.getDistance(from, to);\n    if (valDistance <= 0) {\n      return;\n    }\n\n    // Find the nearest 'beautiful' step for a gauge.\n    // 'beautiful' step. Ex: should be dividable by 1/2/5/10!\n    const step = TimelineUtils.findGoodStep(valDistance / (screenWidth / this._options.stepPx), 0, this._options?.denominators);\n\n    // Find beautiful start point:\n    const fromVal = Math.floor(from / step) * step;\n\n    // Find a beautiful end point:\n    const toVal = Math.ceil(to / step) * step + step;\n\n    if (!TimelineUtils.isNumber(step) || step <= 0 || Math.abs(toVal - fromVal) === 0) {\n      return;\n    }\n    let lastTextStart = 0;\n    this._ctx.save();\n    const headerHeight = TimelineStyleUtils.headerHeight(this._options);\n    const tickHeight = headerHeight / 2;\n    const smallTickHeight = headerHeight / 1.7;\n    for (let i = fromVal; i <= toVal; i += step) {\n      // local\n      const sharpPos = this._getSharp(this._toScreenPx(i));\n      const isLabelTick = i % 1000 === 0;\n      \n      this._ctx.save();\n      this._ctx.beginPath();\n      // Dashed for label ticks, solid for non-label ticks\n      this._ctx.setLineDash(isLabelTick ? [4] : []);\n      this._ctx.lineWidth = 1;\n      if (this._options.tickColor) {\n        this._ctx.strokeStyle = this._options.tickColor;\n      }\n      // Use shorter height for non-label ticks\n      const currentTickHeight = isLabelTick ? tickHeight : smallTickHeight;\n      TimelineUtils.drawLine(this._ctx, sharpPos, currentTickHeight, sharpPos, headerHeight);\n      this._ctx.stroke();\n      \n      // Only show labels at whole second boundaries (1000ms intervals)\n      if (isLabelTick) {\n        if (this._options.labelsColor) {\n          this._ctx.fillStyle = this._options.labelsColor;\n        }\n        if (this._options.font) {\n          this._ctx.font = this._options.font;\n        }\n        \n        const text = this._formatUnitsText(i);\n        const textSize = this._ctx.measureText(text);\n\n        const textX = sharpPos - textSize.width / 2;\n        // skip text render if there is no space for it.\n        if (isNaN(lastTextStart) || lastTextStart <= textX) {\n          lastTextStart = textX + textSize.width;\n          this._ctx.fillText(text, textX, 10);\n        }\n      }\n\n      this._ctx.restore();\n    }\n\n    this._ctx.restore();\n  };\n\n  /**\n   * Private.\n   * Calculate virtual view model.\n   * Determine screen positions for the model elements given.\n   */\n  _generateViewModel = (): TimelineViewModel => {\n    const toReturn = {\n      size: {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n      } as DOMRect,\n      min: null,\n      max: null,\n      rowsViewModels: [],\n      keyframesViewModels: [],\n    } as TimelineViewModel;\n\n    if (!this._model) {\n      return toReturn;\n    }\n    const rows = this._model.rows;\n    if (!rows || !Array.isArray(rows) || rows.length <= 0) {\n      return toReturn;\n    }\n    let rowAbsoluteHeight = TimelineStyleUtils.headerHeight(this._options);\n    rows.forEach((row, index) => {\n      if (!row || row.hidden) {\n        return;\n      }\n\n      // draw with scroll virtualization:\n      const rowHeight = TimelineStyleUtils.getRowHeight(row.style || null, this._options);\n      const marginBottom = TimelineStyleUtils.getRowMarginBottom(row.style || null, this._options);\n      let currentRowY = rowAbsoluteHeight - (this._scrollContainer ? this._scrollContainer.scrollTop : 0);\n      rowAbsoluteHeight += rowHeight + marginBottom;\n      if (index == 0) {\n        rowAbsoluteHeight += marginBottom;\n        currentRowY += marginBottom;\n        toReturn.size.y = currentRowY + marginBottom;\n      }\n\n      toReturn.size.height = Math.max(rowAbsoluteHeight + rowHeight, toReturn.size.height);\n      const rowSize = { x: 0, y: currentRowY, width: this._canvasClientWidth(), height: rowHeight } as DOMRect;\n      const rowViewModel = {\n        size: rowSize,\n        marginBottom: marginBottom,\n        model: row,\n        index: index,\n        min: null,\n        max: null,\n        groupsViewModels: [],\n        keyframesViewModels: [],\n      } as TimelineRowViewModel;\n      toReturn.rowsViewModels.push(rowViewModel);\n      if (!row.keyframes || !row.keyframes.forEach || row.keyframes.length <= 0) {\n        return;\n      }\n\n      // Get min and max ms to draw keyframe rows:\n      if (row && row.keyframes) {\n        row.keyframes.forEach((keyframe) => {\n          if (!keyframe || !TimelineUtils.isNumber(keyframe.val)) {\n            console.log('Unexpected null keyframe or having invalid value');\n            return;\n          }\n          if (keyframe.hidden) {\n            return;\n          }\n          let groupViewModel: TimelineGroupViewModel | null = rowViewModel.groupsViewModels?.find((p) => keyframe.group === p.groupModel) || null;\n          if (!groupViewModel) {\n            groupViewModel = {\n              min: keyframe.val,\n              max: keyframe.val,\n              size: null,\n              groupModel: keyframe.group,\n              keyframesViewModels: [],\n            } as TimelineGroupViewModel;\n            // TimelineStyleUtils.groupFillColor(rowViewModel.model.style || null, this._options);\n            rowViewModel.groupsViewModels.push(groupViewModel);\n          }\n          const keyframeShape = TimelineStyleUtils.keyframeShape(keyframe, keyframe.group, row.style || null, this._options);\n          const keyframeSize = this._getKeyframePosition(keyframe, groupViewModel, rowViewModel, keyframeShape);\n          const keyframeViewModel = {\n            model: keyframe,\n            rowViewModel: rowViewModel,\n            groupViewModel: groupViewModel,\n            size: keyframeSize,\n            shape: keyframeShape,\n          } as TimelineKeyframeViewModel;\n\n          const min = groupViewModel.min === null ? keyframe.val : Math.min(keyframe.val, groupViewModel.min);\n          const max = groupViewModel.max === null ? keyframe.val : Math.max(keyframe.val, groupViewModel.max);\n          if (TimelineUtils.isNumber(min)) {\n            groupViewModel.min = min;\n          }\n          if (TimelineUtils.isNumber(max)) {\n            groupViewModel.max = max;\n          }\n          // All keyframes in the row\n          rowViewModel.keyframesViewModels.push(keyframeViewModel);\n          // All keyframes in the group\n          groupViewModel.keyframesViewModels.push(keyframeViewModel);\n          // All keyframes in the component\n          toReturn.keyframesViewModels.push(keyframeViewModel);\n        });\n      }\n\n      rowViewModel.groupsViewModels.forEach((groupViewModel) => {\n        // Extend row min max bounds by a group bounds. It's used to notify needed visible bounds for the row.\n        TimelineUtils.setMinMax(rowViewModel, groupViewModel, true);\n        // get group screen coords\n        const groupRect = this._getKeyframesGroupSize(groupViewModel, rowViewModel);\n        groupViewModel.size = groupRect;\n      });\n\n      // Extend screen bounds by a current calculation:\n      TimelineUtils.setMinMax(toReturn, rowViewModel, true);\n    });\n    if (TimelineUtils.isNumber(toReturn.max) && (toReturn.max || toReturn.max === 0)) {\n      toReturn.size.width = this.valToPx(toReturn.max);\n    }\n    return toReturn;\n  };\n\n  /**\n   * Render timeline rows.\n   */\n  _renderRows = (): void => {\n    if (!this._ctx) {\n      return;\n    }\n    const viewModel = this._generateViewModel();\n    if (!viewModel?.rowsViewModels) {\n      return;\n    }\n    try {\n      this._ctx.save();\n\n      viewModel.rowsViewModels.forEach((rowViewModel) => {\n        if (!rowViewModel || !this._ctx) {\n          return;\n        }\n\n        this._ctx.fillStyle = TimelineStyleUtils.getRowFillColor(rowViewModel.model.style || null, this._options);\n        //this._ctx.fillRect(data.areaRect.x, data.areaRect.y, data.areaRect.w, data.areaRect.h);\n        // Note: bounds used instead of the clip while clip is slow!\n        const bounds = this._cutBounds(rowViewModel.size);\n        if (bounds?.rect) {\n          const rect = bounds?.rect;\n          this._ctx.fillRect(rect.x, rect.y, rect.width, rect.height);\n        }\n\n        this._renderGroupBounds(rowViewModel);\n        if (bounds?.rect && rowViewModel.model.keyframes?.[0].metadata.frames?.[0]) {\n          const rect = bounds?.rect;\n          const startPixelVal = this.valToPx(rowViewModel.model.keyframes[0]?.val ?? 0) - this.scrollLeft;\n          const endPixelVal = this.valToPx(rowViewModel.model.keyframes[1]?.val ?? 0) - this.scrollLeft;\n          const durationPixelVal = this.valToPx(this._durationVal ?? 0);\n\n          const frameWidth = rowViewModel.model.keyframes?.[0].metadata.frameWidth;\n          const scaleFactor: number = rowViewModel.model.keyframes?.[0].metadata.scaleFactor ?? 1;\n          if (!isNaN(frameWidth) && frameWidth > 0) {\n            const totalFrames = rowViewModel.model.keyframes[0].metadata.frames.length;\n            const maxFrames = Math.floor(durationPixelVal / frameWidth);\n            let frameGap = 0;\n            if (totalFrames < maxFrames) {\n              frameGap = (maxFrames - totalFrames) * frameWidth / (totalFrames - 1);\n            }\n            for (let i = 0; i < Math.min(maxFrames + 1, totalFrames); i++) {\n              const leftX = (frameWidth + frameGap) * i;\n              const frameIndex = Math.floor((leftX / durationPixelVal) * totalFrames);\n              const frame = rowViewModel.model.keyframes[0].metadata.frames[frameIndex];\n              const frameX = rect.x + (this._options.leftMargin ?? 0) + leftX - this.scrollLeft;\n              if (frameX >= 0 && frame) {\n                if (frameX + frameWidth <= durationPixelVal) {\n                  this._ctx.drawImage(frame, frameX, rect.y, frameWidth, rect.height);\n                } else {\n                  const newWidth = durationPixelVal - frameX + this._leftMargin();\n                  this._ctx.drawImage(frame, 0, 0, newWidth / scaleFactor, rect.height / scaleFactor, frameX, rect.y, newWidth, rect.height);\n                }\n              }\n            }\n          }\n          // this._ctx.drawImage(rowViewModel.model.keyframes[0].metadata.frames[0], (this._options.leftMargin ?? 0), rect.y, 400, rect.height);\n          // Add a semi transparent rect\n          // Change hex color to semi-transparent\n          const rowColor = rowViewModel.model.style?.fillColor ?? this._options.rowsStyle?.fillColor ?? '#FFFFFF';\n          if (rowColor.startsWith('#') && rowColor.length === 9) {\n            // BF is for 75% opacity\n            this._ctx.fillStyle = rowColor.substring(0, 7) + 'BF';\n          }\n          if (startPixelVal > 0) {\n            this._ctx.fillRect(rect.x + (this._options.leftMargin ?? 0), rect.y, startPixelVal, rect.height);\n          }\n          if (endPixelVal < durationPixelVal) {\n            this._ctx.fillRect(rect.x + (this._options.leftMargin ?? 0) + endPixelVal, rect.y, durationPixelVal - endPixelVal, rect.height);\n          }\n        }\n      });\n    } finally {\n      this._ctx.restore();\n    }\n  };\n  /**\n   * Render group for the row.\n   */\n  _renderGroupBounds = (rowViewModel: TimelineRowViewModel): void => {\n    if (!rowViewModel || !this._ctx) {\n      return;\n    }\n\n    rowViewModel?.groupsViewModels?.forEach((groupsViewModels) => {\n      if (!this._ctx) {\n        return;\n      }\n      if ((groupsViewModels?.keyframesViewModels?.length || 0) <= 1) {\n        return;\n      }\n      const groupFillColor = TimelineStyleUtils.groupFillColor(this._options, groupsViewModels.groupModel, rowViewModel?.model?.style);\n      const strokeColor = TimelineStyleUtils.groupStrokeColor(this._options, groupsViewModels.groupModel, rowViewModel?.model?.style);\n      let groupStrokeThickness = TimelineStyleUtils.groupStrokeThickness(this._options, groupsViewModels.groupModel, rowViewModel?.model?.style);\n      const groupsRadii = TimelineStyleUtils.groupsRadii(this._options, groupsViewModels.groupModel, rowViewModel?.model?.style);\n      if (!groupsViewModels.size) {\n        console.log('Size of the group cannot be calculated');\n        return;\n      }\n\n      try {\n        this._ctx.save();\n\n        // get the bounds on a canvas\n        const rectBounds = this._cutBounds(groupsViewModels.size);\n        if (rectBounds?.rect) {\n          const rect = rectBounds.rect;\n          if (!strokeColor) {\n            groupStrokeThickness = 0;\n          }\n          // Manipulate it again\n          this._ctx.strokeStyle = groupStrokeThickness > 0 ? strokeColor : '';\n          this._ctx.fillStyle = groupFillColor;\n          this._ctx.lineWidth = groupStrokeThickness;\n          // Different radii for each corner, top-left clockwise to bottom-left\n          this._ctx.beginPath();\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          // @ts-ignore\n          this._ctx.roundRect(\n            rect.x + groupStrokeThickness,\n            rect.y + groupStrokeThickness,\n            rect.width - groupStrokeThickness,\n            rect.height - groupStrokeThickness,\n            groupsRadii as number | DOMPointInit,\n          );\n          this._ctx.fill();\n          if (groupStrokeThickness > 0) {\n            this._ctx.stroke();\n          }\n        }\n      } finally {\n        this._ctx.restore();\n      }\n    });\n  };\n  /**\n   * Method is used for the canvas drawing optimization.\n   * Bounds are cut to draw only visible parts for the active canvas.\n   */\n  _cutBounds = (rect: DOMRect): TimelineCutBoundsRectResults | null => {\n    if (!rect) {\n      return null;\n    }\n    // default bounds: minX, maxX, minY, maxY\n    const testOffset = 0;\n    const minX = 0 + testOffset;\n    const maxX = this._canvasClientWidth() - testOffset;\n    const minY = TimelineStyleUtils.headerHeight(this._options) + testOffset;\n    const maxY = this._canvasClientHeight() - testOffset;\n\n    return this._cutBoundsWhenOverlap(rect, minX, maxX, minY, maxY);\n  };\n  _cutBoundsWhenOverlap = (rect: DOMRect, minX: number, maxX: number, minY: number, maxY: number): TimelineCutBoundsRectResults | null => {\n    if (!rect) {\n      return null;\n    }\n\n    if (\n      // At the moment it's a check of top and left intersection.\n      TimelineUtils.isRectIntersects(rect, {\n        x: minX,\n        y: minY,\n        width: TimelineUtils.getDistance(minX, maxX),\n        height: TimelineUtils.getDistance(minY, maxY),\n      } as DOMRect)\n    ) {\n      const y = Math.max(rect.y, minY);\n      const x = Math.max(rect.x, minX);\n      const offsetW = rect.x - x;\n      const offsetH = rect.y - y;\n\n      return {\n        rect: { height: rect.height + offsetH, width: rect.width + offsetW, x: x, y: y },\n        overlapY: Math.abs(offsetH) > 0,\n        overlapX: Math.abs(offsetW) > 0,\n      } as TimelineCutBoundsRectResults;\n    }\n    return null;\n  };\n  /**\n   * Calculate keyframe group screen rect size that is used during the rendering.\n   * @param row\n   * @param rowY row screen coords y position\n   */\n  _getKeyframesGroupSize = (groupViewModel: TimelineGroupViewModel, rowViewModel: TimelineRowViewModel): DOMRect => {\n    const rowY = rowViewModel.size.y;\n    const rowHeight = rowViewModel.size.height;\n    const groupModel = groupViewModel.groupModel || null;\n    let groupHeight = TimelineStyleUtils.groupHeight(this._options, groupModel, rowViewModel?.model?.style);\n\n    let marginTop = TimelineStyleUtils.groupMarginTop(this._options, groupModel, rowViewModel?.model?.style);\n    const isAutoHeight = groupHeight === 'auto';\n    if (!groupHeight || isAutoHeight) {\n      groupHeight = Math.floor(rowHeight);\n    }\n    groupHeight = typeof groupHeight === 'string' ? parseInt(groupHeight) : groupHeight;\n    if (groupHeight > rowHeight) {\n      groupHeight = rowHeight;\n    }\n    const isAutoMargin = marginTop === 'auto';\n    if (typeof marginTop === 'string') {\n      if (isAutoMargin) {\n        marginTop = (rowHeight - groupHeight) / 2;\n      } else {\n        marginTop = parseInt(marginTop) || 0;\n      }\n    }\n\n    if (!isAutoMargin) {\n      if (isAutoHeight) {\n        groupHeight -= marginTop * 2;\n      }\n    }\n\n    // draw keyframes rows.\n    const xMin = this._toScreenPx(groupViewModel.min); // local\n    const xMax = this._toScreenPx(groupViewModel.max); // local\n\n    return {\n      x: xMin,\n      y: rowY + marginTop,\n      height: groupHeight,\n      width: TimelineUtils.getDistance(xMin, xMax),\n    } as DOMRect;\n  };\n\n  _getKeyframePosition = (keyframe: TimelineKeyframe, groupViewModel: TimelineGroupViewModel, rowViewModel: TimelineRowViewModel, keyframeShape: TimelineKeyframeShape): DOMRect | null => {\n    if (!keyframe) {\n      console.log('keyframe should be defined.');\n      return null;\n    }\n\n    const val = keyframe.val;\n    if (!TimelineUtils.isNumber(val)) {\n      return null;\n    }\n\n    const rowSize = rowViewModel.size;\n    // get center of the lane:\n    let y = rowSize.y + rowSize.height / 2;\n    const groupModel = groupViewModel?.groupModel || null;\n    let height: number | string = TimelineStyleUtils.keyframeHeight(keyframe, groupModel, rowViewModel?.model?.style, this._options);\n    let width: number | string = TimelineStyleUtils.keyframeWidth(keyframe, groupModel, rowViewModel?.model?.style, this._options);\n\n    if (height === 'auto') {\n      height = rowSize.height / 3;\n    }\n    if (width === 'auto') {\n      width = height;\n    }\n    height = Number(height);\n    if (!Number.isNaN(height) && height && (height as number) > 0) {\n      const x = Math.floor(this._toScreenPx(val));\n      y = Math.floor(y);\n      const rect = {\n        x: x, // local\n        y: y,\n        height: height,\n        width: width,\n      } as DOMRect;\n      // Rect we are drawing in the center\n      if (keyframeShape === TimelineKeyframeShape.Rect) {\n        rect.y = rect.y - rect.height / 2;\n        rect.x = rect.x - rect.width / 2;\n      }\n      return rect;\n    }\n\n    return null;\n  };\n\n  _renderKeyframes = (): void => {\n    this._forEachKeyframe((keyframeViewModel) => {\n      if (!this._ctx) {\n        return;\n      }\n      const size = keyframeViewModel.size;\n\n      if (size) {\n        const x = this._getSharp(size.x);\n        const y = size.y;\n        const bounds = this._cutBounds({\n          x: x - size.width / 2,\n          y: y - size.height / 2,\n          width: size.width,\n          height: size.height,\n        } as DOMRect);\n        if (!bounds) {\n          return;\n        }\n\n        this._ctx.save();\n\n        try {\n          // Performance FIX: use clip only  when we are in the collision! Clip is slow!\n          // Other keyframes should be hidden by bounds check.\n          // Note: clip with just render part of the keyframe\n          if (bounds && bounds.overlapY) {\n            this._ctx.beginPath();\n            this._ctx.rect(0, TimelineStyleUtils.headerHeight(this._options), this._canvasClientWidth(), this._canvasClientWidth());\n            this._ctx.clip();\n          }\n\n          this._renderKeyframe(this._ctx, keyframeViewModel);\n        } finally {\n          this._ctx.restore();\n        }\n      }\n    });\n  };\n\n  _renderKeyframe = (ctx: CanvasRenderingContext2D, keyframeViewModel: TimelineKeyframeViewModel): void => {\n    const shape = keyframeViewModel.shape;\n    if (shape === TimelineKeyframeShape.None) {\n      return;\n    }\n    const size = keyframeViewModel.size;\n    const x = this._getSharp(size.x);\n    const y = size.y;\n\n    const keyframe = keyframeViewModel.model;\n    const row = keyframeViewModel.rowViewModel.model;\n    const rowStyle = row.style || null;\n    const groupModel = keyframeViewModel?.groupViewModel?.groupModel || null;\n    const keyframeColor = keyframe.selected\n      ? TimelineStyleUtils.keyframeSelectedFillColor(keyframe, groupModel, rowStyle, this._options)\n      : TimelineStyleUtils.keyframeFillColor(keyframe, groupModel, rowStyle, this._options);\n    const border = TimelineStyleUtils.keyframeStrokeThickness(keyframe, groupModel, rowStyle, this._options);\n    let strokeColor = '';\n    if (border > 0) {\n      if (keyframe.selected) {\n        strokeColor = TimelineStyleUtils.keyframeSelectedStrokeColor(keyframe, groupModel, rowStyle, this._options);\n      } else {\n        strokeColor = TimelineStyleUtils.keyframeStrokeColor(keyframe, groupModel, rowStyle, this._options);\n      }\n    }\n\n    if (shape == TimelineKeyframeShape.Rhomb) {\n      ctx.beginPath();\n      ctx.translate(x, y);\n      ctx.rotate((45 * Math.PI) / 180);\n      if (border > 0 && strokeColor) {\n        ctx.fillStyle = strokeColor;\n        ctx.rect(-size.width / 2, -size.height / 2, size.width, size.height);\n        ctx.fill();\n      }\n\n      ctx.fillStyle = keyframeColor;\n      // draw main keyframe data with offset.\n      ctx.translate(border, border);\n      ctx.rect(-size.width / 2, -size.height / 2, size.width - border * 2, size.height - border * 2);\n      ctx.fill();\n    } else if (shape == TimelineKeyframeShape.Circle) {\n      ctx.beginPath();\n      if (border > 0 && strokeColor) {\n        ctx.fillStyle = strokeColor;\n        ctx.arc(x, y, size.height, 0, 2 * Math.PI);\n      }\n      ctx.fillStyle = keyframeColor;\n      ctx.arc(x, y, size.height - border, 0, 2 * Math.PI);\n      ctx.fill();\n    } else if (shape == TimelineKeyframeShape.Rect) {\n      ctx.beginPath();\n\n      if (border > 0 && strokeColor) {\n        ctx.fillStyle = strokeColor;\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        ctx.roundRect(x, y, size.width, size.height, 2);\n        ctx.fill();\n      }\n\n      ctx.fillStyle = keyframeColor;\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      ctx.roundRect(x + border, y + border, size.width - border, size.height - border, 2);\n      ctx.fill();\n    }\n  };\n\n  _renderSelectionRect = (): void => {\n    if (this._drag || !this._ctx || !this._canvas) {\n      return;\n    }\n    this._ctx.save();\n    const thickness = 1;\n    if (this._selectionRect && this._selectionRectEnabled) {\n      this._ctx.setLineDash([4]);\n      this._ctx.lineWidth = this._pixelRatio;\n      const selectionColor = this._options.selectionColor;\n      if (selectionColor) {\n        this._ctx.strokeStyle = selectionColor;\n      }\n      this._ctx.strokeRect(\n        this._getSharp(this._selectionRect.x, thickness),\n        this._getSharp(this._selectionRect.y, thickness),\n        Math.floor(this._selectionRect.width),\n        Math.floor(this._selectionRect.height),\n      );\n    }\n    this._ctx.restore();\n  };\n\n  _renderBackground = (): void => {\n    if (!this._ctx || !this._canvas) {\n      return;\n    }\n    if (this._options.fillColor) {\n      this._ctx.save();\n      this._ctx.beginPath();\n      this._ctx.rect(0, 0, this._canvasClientWidth(), this._canvasClientHeight());\n      this._ctx.fillStyle = this._options.fillColor;\n      this._ctx.fill();\n      this._ctx.restore();\n    } else {\n      // Clear if bg not set.\n      this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\n    }\n  };\n\n  _renderTimeline = (): void => {\n    if (this === null || !this._ctx || !this._options || !this._options.timelineStyle) {\n      return;\n    }\n    const style = this._options.timelineStyle;\n    this._ctx.save();\n    try {\n      const thickness = style.width || 1;\n      this._ctx.lineWidth = thickness * this._pixelRatio;\n      const timeLinePos = this._getSharp(this._toScreenPx(this._val), thickness);\n      const timeLinePosEnd = this._getSharp(this._toScreenPx(this._durationVal), thickness);\n      if (style.strokeColor) {\n        this._ctx.strokeStyle = style.strokeColor;\n      }\n      if (style.fillColor) {\n        this._ctx.fillStyle = style.fillColor;\n      }\n      const y = style.marginTop || 0;\n      const yBottom = style.marginBottom || 0;\n      this._ctx.beginPath();\n      const canvasHeight = this._canvasClientHeight() - yBottom;\n      TimelineUtils.drawLine(this._ctx, timeLinePos, y, timeLinePos, canvasHeight);\n      this._ctx.stroke();\n      this._ctx.beginPath();\n      if (style.durationStrokeColor) {\n        this._ctx.strokeStyle = style.durationStrokeColor;\n      }\n      // Majorly added only this line to draw the end of the timeline\n      if (style.durationCapStyle || style.durationStrokeColor) {\n        TimelineUtils.drawLine(this._ctx, timeLinePosEnd, 0, timeLinePosEnd, canvasHeight);\n      }\n      this._ctx.stroke();\n      this._renderTimelineCap(timeLinePos, y, this._options?.timelineStyle?.capStyle);\n      this._renderTimelineCap(timeLinePosEnd, 0, this._options?.timelineStyle?.durationCapStyle);\n\n      // Begin a path\n      this._ctx.beginPath();\n\n      // Define a rectangle path\n      this._ctx.rect(timeLinePosEnd, 0, this._canvasClientWidth() - timeLinePosEnd, this._canvasClientHeight()); // x, y, width, height\n\n      // Set fill color\n      this._ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';\n\n      // Fill rectangle\n      this._ctx.fill();\n      if (this._options.headerHeight) {\n        this._ctx.beginPath();\n        this._ctx.strokeStyle = '#F2F4F7';\n        this._ctx.moveTo(0, this._options.headerHeight);\n        this._ctx.lineTo(this._canvasClientWidth(), this._options.headerHeight);\n        this._ctx.stroke();\n      }\n    } finally {\n      this._ctx.restore();\n    }\n  };\n  /**\n   * Render timeline cap top.\n   */\n  _renderTimelineCap = (timeLinePos: number, y: number, capStyle?: TimelineCapStyle): void => {\n    if (!this._ctx || !capStyle) {\n      return;\n    }\n    if (capStyle.capType === TimelineCapShape.None) {\n      return;\n    }\n\n    const capSize = capStyle.width || 0;\n    const capHeight = capStyle.height || 0;\n    if (capSize && capHeight) {\n      // Set the fill style for each call\n      this._ctx.fillStyle = capStyle.fillColor || 'white';\n\n      if (capStyle.capType === TimelineCapShape.Triangle) {\n        this._ctx.beginPath();\n        this._ctx.moveTo(timeLinePos - capSize / 2, y);\n        this._ctx.lineTo(timeLinePos + capSize / 2, y);\n        this._ctx.lineTo(timeLinePos + capSize / 2, y + capHeight / 2);\n        this._ctx.lineTo(timeLinePos, y + capHeight);\n        this._ctx.lineTo(timeLinePos - capSize / 2, y + capHeight / 2);\n        this._ctx.closePath();\n        this._ctx.fill();\n      } else if (capStyle.capType === TimelineCapShape.Rect) {\n        this._ctx.fillRect(timeLinePos - capSize / 2, y, capSize, capHeight);\n      }\n    }\n  };\n\n  _renderHeaderBackground = (): void => {\n    if (!this._ctx || !this._options) {\n      return;\n    }\n    if (TimelineStyleUtils.headerHeight(this._options)) {\n      this._ctx.save();\n      // draw ticks background\n      this._ctx.lineWidth = this._pixelRatio;\n      if (this._options.headerFillColor) {\n        // draw ticks background\n        this._ctx.lineWidth = this._pixelRatio;\n        // draw header background\n        this._ctx.fillStyle = this._options.headerFillColor;\n        this._ctx.fillRect(0, 0, this._canvasClientWidth(), TimelineStyleUtils.headerHeight(this._options));\n      } else {\n        this._ctx.clearRect(0, 0, this._canvasClientWidth(), TimelineStyleUtils.headerHeight(this._options));\n      }\n      this._ctx.restore();\n    }\n  };\n\n  redraw = (): void => {\n    if (window?.requestAnimationFrame) {\n      window.requestAnimationFrame(this._redrawInternal);\n    } else {\n      this._redrawInternal();\n    }\n  };\n\n  /**\n   * perform scroll to max right.\n   */\n  public scrollToRightBounds = (): void => {\n    if (this._scrollContainer && this._scrollContainer.scrollLeft !== this._scrollContainer.scrollWidth) {\n      this.scrollLeft = this._scrollContainer.scrollWidth;\n    }\n  };\n\n  /**\n   * Redraw parts of the component in the specific order.\n   */\n  _redrawInternal = (): void => {\n    if (!this._ctx || !this._scrollContainer) {\n      console.log('Context is not initialized');\n      return;\n    }\n    // Rescale when animation is played out of the bounds.\n    if (this.valToPx(this._val) > this._scrollContainer.scrollWidth) {\n      this.rescale();\n      if (!this._isPanStarted && this._drag && this._drag.type !== TimelineElementType.Timeline && this._drag.type !== TimelineElementType.DurationLine) {\n        this.scrollToRightBounds();\n      }\n    }\n    const timelineColor = this._options.fillColor ?? '#FFFFFF';\n    // If timeline color has some opacity clear it every time before render\n    if (timelineColor.startsWith('#') && timelineColor.length === 9 && !timelineColor.endsWith('FF')) {\n      const yBottom = this._options.timelineStyle?.marginBottom || 0;\n      this._ctx.clearRect(0, TimelineStyleUtils.headerHeight(this._options), this._canvasClientWidth(), this._canvasClientHeight() - yBottom - TimelineStyleUtils.headerHeight(this._options));\n    }\n    this._renderBackground();\n    this._renderRows();\n    // Render after rows\n    this._renderHeaderBackground();\n    this._renderTicks();\n    this._renderKeyframes();\n    this._renderSelectionRect();\n    this._renderTimeline();\n  };\n\n  /**\n   * Find sharp pixel position\n   */\n  _getSharp = (pos: number, thickness = 1): number => {\n    pos = Math.round(pos);\n    if (thickness % 2 == 0) {\n      return pos;\n    }\n\n    return pos + this._pixelRatio / 2;\n  };\n\n  /**\n   * Get current time:\n   */\n  public getTime = (): number => {\n    return this._val;\n  };\n\n  public getDuration = (): number => {\n    return this._durationVal;\n  };\n\n  /**\n   * Set duration\n   * @param val value.\n   * @param source event source.\n   */\n  _setDurationInternal = (val: number, source: TimelineEventSource = TimelineEventSource.Programmatically): boolean => {\n    if (!this._options) {\n      return false;\n    }\n    val = Math.round(val);\n    val = TimelineUtils.keepInBounds(val, this._options.min);\n    if (this._durationVal != val) {\n      const prevVal = this._durationVal;\n      const timelineEvent = new TimelineTimeChangedEvent();\n      timelineEvent.val = val;\n      timelineEvent.prevVal = prevVal;\n      timelineEvent.source = source;\n      this._durationVal = val;\n      this.emit(TimelineEvents.DurationChanged, timelineEvent);\n      if (timelineEvent.isPrevented()) {\n        this._durationVal = prevVal;\n        return false;\n      }\n      return true;\n    }\n\n    return false;\n  };\n\n  /**\n   * Set current time internal\n   * @param val value.\n   * @param source event source.\n   */\n  _setTimeInternal = (val: number, source: TimelineEventSource = TimelineEventSource.Programmatically): boolean => {\n    if (!this._options) {\n      return false;\n    }\n    val = Math.round(val);\n    val = TimelineUtils.keepInBounds(val, this._options.min);\n    if (this._val != val) {\n      const prevVal = this._val;\n      const timelineEvent = new TimelineTimeChangedEvent();\n      timelineEvent.val = val;\n      timelineEvent.prevVal = prevVal;\n      timelineEvent.source = source;\n      this._val = val;\n      this.emit(TimelineEvents.TimeChanged, timelineEvent);\n      if (timelineEvent.isPrevented()) {\n        this._val = prevVal;\n        return false;\n      }\n      return true;\n    }\n\n    return false;\n  };\n\n  public setDuration = (val: number, force?: boolean): boolean => {\n    // don't allow to change time during drag:\n    if (this._drag && this._drag.type === TimelineElementType.Timeline && force !== true) {\n      return false;\n    }\n    if (this._drag && this._drag.type === TimelineElementType.DurationLine && force !== true) {\n      return false;\n    }\n\n    const isChanged = this._setDurationInternal(val, TimelineEventSource.SetTimeMethod);\n    if (isChanged) {\n      this.rescale();\n      this.redraw();\n    }\n\n    return isChanged;\n  };\n\n  public setTime = (val: number): boolean => {\n    // don't allow to change time during drag:\n    if (this._drag && this._drag.type === TimelineElementType.Timeline) {\n      return false;\n    }\n    if (this._drag && this._drag.type === TimelineElementType.DurationLine) {\n      return false;\n    }\n\n    if (this.scrollLeft + this._canvasClientWidth() < this.valToPx(val)) {\n      this.scrollLeft = this.valToPx(val) - this._canvasClientWidth() + 30;\n    }\n    const isChanged = this._setTimeInternal(val, TimelineEventSource.SetTimeMethod);\n    if (isChanged) {\n      this.rescale();\n      this.redraw();\n    }\n\n    return isChanged;\n  };\n\n  public getOptions = (): TimelineOptions => {\n    return this._options;\n  };\n\n  /**\n   * Current scroll left position.\n   */\n  public get scrollLeft(): number {\n    return this._scrollContainer?.scrollLeft || 0;\n  }\n  public set scrollLeft(value: number) {\n    if (this._scrollContainer && this._scrollContainer.scrollLeft !== value) {\n      this._scrollProgrammatically = true;\n      this._scrollContainer.scrollLeft = value;\n    }\n  }\n  public get scrollTop(): number {\n    return this._scrollContainer?.scrollTop || 0;\n  }\n\n  public set scrollTop(value: number) {\n    if (this._scrollContainer && this._scrollContainer.scrollTop !== value) {\n      this._scrollProgrammatically = true;\n      this._scrollContainer.scrollTop = value;\n    }\n  }\n\n  /**\n   * Set options and render the component.\n   * Note: Options will be merged\\appended with the defaults and component will be invalidated/rendered again.\n   */\n  public setOptions = (toSet: TimelineOptions): TimelineOptions => {\n    this._options = this._setOptions(toSet);\n    this.rescale();\n    this.redraw();\n    // Merged options:\n    return this._options;\n  };\n\n  /**\n   * Private. Apply html container styles from options if any is set.\n   */\n  _applyContainersStyles = (): void => {\n    if (this._scrollContainer && this._options) {\n      const classList = this._scrollContainer.classList;\n      if (this._options.scrollContainerClass && !classList.contains(this._options.scrollContainerClass)) {\n        classList.add(this._options.scrollContainerClass);\n      }\n      if (this._options.fillColor) {\n        this._scrollContainer.style.background = this._options.fillColor;\n      }\n    }\n  };\n  _setOptions = (toSet: TimelineOptions): TimelineOptions => {\n    if (!toSet) {\n      return this._options || {};\n    }\n    this._options = TimelineUtils.mergeOptions(this._options, toSet);\n    // Normalize and validate spans per value.\n    this._options.snapStep = TimelineUtils.keepInBounds(this._options.snapStep || 0, 0, this._options.stepVal || 0);\n    this._currentZoom = this._setZoom(this._options.zoom || 0, this._options.zoomMin, this._options.zoomMax);\n    this._options.min = TimelineUtils.isNumber(this._options.min) ? this._options.min : 0;\n    this._options.max = TimelineUtils.isNumber(this._options.max) ? this._options.max : Number.MAX_VALUE;\n    this._applyContainersStyles();\n    // Prevent current active dragging of the timeline, while it's set that it's not allowed anymore.\n    if (toSet.timelineDraggable === false) {\n      if (this._drag && this._drag.type === TimelineElementType.Timeline) {\n        this._cleanUpSelection();\n      }\n      if (this._drag && this._drag.type === TimelineElementType.DurationLine) {\n        this._cleanUpSelection();\n      }\n    }\n    return this._options;\n  };\n\n  /**\n   * Get current model.\n   */\n  public getModel = (): TimelineModel | null => {\n    return this._model;\n  };\n\n  /**\n   * Set model and redraw application.\n   * @param data\n   */\n  public setModel = (data: TimelineModel): void => {\n    this._model = data;\n    this.rescale();\n    this.redraw();\n  };\n\n  _getMousePos = (canvas: HTMLCanvasElement, e: TouchEvent | MouseEvent | any): TimelineMouseData => {\n    let radius = 1;\n    let clientX = 0;\n    let clientY = 0;\n    if (e.changedTouches && e.changedTouches.length > 0) {\n      // TODO: implement better touch support\n      const touch = e.changedTouches[0];\n      clientX = touch.clientX;\n      clientY = touch.clientY;\n      radius = Math.max(radius, touch.radiusX, touch.radiusY);\n    } else {\n      clientX = e.clientX;\n      clientY = e.clientY;\n    }\n\n    const rect = canvas.getBoundingClientRect(), // abs. size of element\n      scaleX = canvas.width / this._pixelRatio / rect.width, // relationship bitmap vs. element for X\n      scaleY = canvas.height / this._pixelRatio / rect.height; // relationship bitmap vs. element for Y\n\n    const x = (clientX - rect.left) * scaleX;\n    const y = (clientY - rect.top) * scaleY;\n    // scale mouse coordinates after they have been adjusted to be relative to element\n    return {\n      pos: { x, y } as DOMPoint,\n      radius,\n      args: e,\n    } as TimelineMouseData;\n  };\n\n  /**\n   * Apply container div size to the container on changes detected.\n   */\n  _updateCanvasScale = (): boolean => {\n    if (!this._scrollContainer || !this._container || !this._ctx) {\n      console.log('Component should be initialized first.');\n      return false;\n    }\n    let changed = false;\n    const width = this._scrollContainer.clientWidth * this._pixelRatio;\n    const height = this._scrollContainer.clientHeight * this._pixelRatio;\n    if (Math.floor(width) != Math.floor(this._ctx.canvas.width)) {\n      this._ctx.canvas.width = width;\n      changed = true;\n    }\n\n    if (Math.floor(height) != Math.floor(this._ctx.canvas.height)) {\n      this._ctx.canvas.height = height;\n      changed = true;\n    }\n\n    if (changed) {\n      this._ctx.setTransform(this._pixelRatio, 0, 0, this._pixelRatio, 0, 0);\n    }\n    return changed;\n  };\n\n  /**\n   * Rescale and update size of the container.\n   */\n  public rescale = (): boolean => {\n    return this._rescaleInternal();\n  };\n\n  /**\n   * This method is used to draw additional space when after there are no keyframes.\n   * When scrolled we should allow to indefinitely scroll right, so space should be extended to drag keyframes outside of the current size bounds.\n   */\n  _rescaleInternal = (newWidth: number | null = null, newHeight: number | null = null, scrollMode = TimelineScrollSource.DefaultMode): boolean => {\n    let changed = this._updateCanvasScale();\n    if (!this._scrollContent) {\n      return changed;\n    }\n    const data = this._generateViewModel();\n    if (data && data.size) {\n      const additionalOffset = this._options.stepPx || 0;\n      newWidth = newWidth || 0;\n      // content should be not less than current timeline position + width of the timeline\n      const timelineGlobalPos = this.valToPx(this._val) + this._leftMargin();\n      let timelinePos = 0;\n      const timelineDuration = this.valToPx(this._durationVal + 1000);\n      const rightPosition = this.scrollLeft + this.getClientWidth();\n\n      if (timelineGlobalPos >= rightPosition) {\n        if (scrollMode == TimelineScrollSource.ScrollBySelection) {\n          // When item (timeline, selection rectangle) is just dragged to the right corner.\n          timelinePos = Math.floor(timelineGlobalPos + this._leftMargin());\n        } else {\n          // When timeline is playing and we need to add next screen (when timeline goes out of the bounds.)\n          timelinePos = Math.floor(timelineGlobalPos + this.getClientWidth() + this._leftMargin());\n        }\n      }\n      const keyframeW = data.size.width + this._leftMargin() + additionalOffset;\n\n      newWidth = Math.max(\n        // New expected component width.\n        newWidth,\n        // keyframes max width\n        keyframeW,\n        // not less than current scroll position\n        rightPosition,\n        timelinePos,\n        // not less than duration value\n        timelineDuration,\n      );\n\n      const minWidthPx = Math.floor(newWidth) + 'px';\n      if (minWidthPx != this._scrollContent.style.minWidth) {\n        this._scrollContent.style.minWidth = minWidthPx;\n        changed = true;\n      }\n\n      newHeight = Math.max(\n        // active size\n        Math.floor(data.size.height + this._canvasClientHeight() * 0.2),\n        (this._scrollContainer?.scrollTop || 0) + this._canvasClientHeight() - 1,\n        Math.round(newHeight || 0),\n      );\n\n      const h = Math.floor(newHeight) + 'px';\n      if (this._scrollContent.style.minHeight != h) {\n        this._scrollContent.style.minHeight = h;\n        return changed;\n      }\n    }\n    return changed;\n  };\n\n  /**\n   * Filter elements that can be dragged.\n   * Filtration is done based on the timeline styles and options.\n   */\n  _filterDraggableElements = (elements: TimelineElement[]): TimelineElement[] => {\n    // filter and sort: Timeline, individual keyframes, groups (distance).\n    const filteredElements = elements.filter((element) => {\n      if (!element) {\n        return false;\n      }\n      if (element.type === TimelineElementType.Keyframe) {\n        if (!TimelineStyleUtils.keyframeDraggable(element.keyframe || null, element.keyframe?.group || null, element?.row || null, this._options)) {\n          return false;\n        }\n      } else if (element.type === TimelineElementType.Group) {\n        if (!TimelineStyleUtils.groupDraggable(element.group || null, element.row || null, this._options)) {\n          return false;\n        }\n      } else if (element.type === TimelineElementType.Timeline) {\n        if (this._options?.timelineDraggable === false) {\n          return false;\n        }\n      } else if (element.type === TimelineElementType.Row) {\n        return false;\n      }\n      return true;\n    });\n    return filteredElements;\n  };\n\n  /**\n   * Check if duration line present\n   */\n  _isDurationLinePresent(): boolean {\n    return (this._options.timelineStyle?.durationCapStyle !== undefined || this._options.timelineStyle?.durationStrokeColor !== undefined)\n  }\n\n  /**\n   * Filter and sort draggable elements by the priority to get first draggable element closest to the passed value.\n   */\n  _findDraggableElement = (elements: TimelineElement[], val: number | null = null): TimelineElement | null => {\n    // filter and sort: Timeline, individual keyframes, groups (distance).\n    const getPriority = (type: TimelineElementType): number => {\n      if (type === TimelineElementType.Timeline) {\n        return 4;\n      } else if (type === TimelineElementType.Keyframe) {\n        return 1;\n      } else if (type === TimelineElementType.Group) {\n        return 2;\n      } else if (type === TimelineElementType.DurationLine && this._isDurationLinePresent()) {\n        return 3;\n      }\n      return -1;\n    };\n\n    const sortDraggable = (a: TimelineElement, b: TimelineElement): number => {\n      let prioA = getPriority(a.type);\n      let prioB = getPriority(b.type);\n      if (prioA === prioB) {\n        if (val === null) {\n          return 0;\n        }\n\n        // Sort by distance\n        prioA = TimelineUtils.getDistance(a.val, val);\n        prioB = TimelineUtils.getDistance(b.val, val);\n        if (prioA === prioB) {\n          return 0;\n        }\n        return prioA < prioB ? 1 : -1;\n      }\n\n      return prioA < prioB ? 1 : -1;\n    };\n    const sorted = this._filterDraggableElements(elements).sort(sortDraggable);\n    if (sorted.length > 0) {\n      return sorted[sorted.length - 1];\n    }\n\n    return null;\n  };\n  /**\n   * get all clickable elements by the given local screen coordinate.\n   */\n  public elementFromPoint = (pos: DOMPoint, clickRadius: number, onlyTypes?: TimelineElementType[] | null): TimelineElement[] => {\n    clickRadius = Math.max(clickRadius, 1);\n    const toReturn: TimelineElement[] = [];\n\n    if (!pos) {\n      return toReturn;\n    }\n\n    const headerHeight = TimelineStyleUtils.headerHeight(this._options);\n    // Check whether we can drag timeline.\n    const timeLinePos = this._toScreenPx(this._val);\n    const timelinePosDurationEnd = this._toScreenPx(this._durationVal);\n    let width = 0;\n    const timelineStyle = this._options?.timelineStyle;\n    if (timelineStyle) {\n      width = Math.max((timelineStyle.width || 1) * this._pixelRatio, (timelineStyle?.capStyle?.width || 0) * this._pixelRatio || 1) + clickRadius;\n    }\n    // Allow to select timeline only by half of a header to allow select by a selector top most keyframes row.\n    if (pos.y <= headerHeight * 0.5 || (pos.x >= timeLinePos - width / 2 && pos.x <= timeLinePos + width / 2)) {\n      toReturn.push({\n        val: this._val,\n        type: TimelineElementType.Timeline,\n      } as TimelineElement);\n    }\n    if (pos.x >= timelinePosDurationEnd - width / 2 && pos.x <= timelinePosDurationEnd + width / 2 && this._isDurationLinePresent()) {\n      toReturn.push({\n        val: this._durationVal,\n        type: TimelineElementType.DurationLine,\n      } as TimelineElement);\n    }\n    const snap = this._options.snapEnabled;\n    if (pos.y >= headerHeight && this._options.keyframesDraggable) {\n      this._forEachKeyframe(\n        (keyframeViewModel, _, isNextRow): void => {\n          const rowViewModel = keyframeViewModel.rowViewModel;\n          // Check keyframes group overlap\n          if (isNextRow) {\n            if (rowViewModel.groupsViewModels) {\n              rowViewModel.groupsViewModels.forEach((groupViewModel) => {\n                if (!groupViewModel?.size) {\n                  return;\n                }\n                const keyframesGroupOverlapped = TimelineUtils.isOverlap(pos.x, pos.y, groupViewModel.size);\n                if (keyframesGroupOverlapped) {\n                  const keyframesModels = groupViewModel?.keyframesViewModels.map((p) => p.model) || [];\n                  const groupElement = {\n                    // TODO:\n                    val: this._mousePosToVal(pos.x, snap),\n                    type: TimelineElementType.Group,\n                    group: groupViewModel.groupModel,\n                    row: rowViewModel.model,\n                    keyframes: keyframesModels,\n                  } as TimelineElement;\n\n                  const snapped = this.snapVal(groupViewModel.min);\n                  // get snapped mouse pos based on a min value.\n                  groupElement.val += groupViewModel.min - snapped;\n                  toReturn.push(groupElement);\n                }\n              });\n            }\n          }\n\n          const keyframePosRect = keyframeViewModel.size;\n          if (keyframePosRect) {\n            let isMouseOver = false;\n            if (keyframeViewModel.shape === TimelineKeyframeShape.Rect) {\n              const extendedMouseRect = TimelineUtils.shrinkSelf({ x: pos.x, y: pos.y, height: clickRadius, width: clickRadius } as DOMRect, clickRadius);\n              isMouseOver = TimelineUtils.isRectIntersects(extendedMouseRect, keyframePosRect, true);\n            } else {\n              const dist = TimelineUtils.getDistance(keyframePosRect.x, keyframePosRect.y, pos.x, pos.y);\n              isMouseOver = dist <= keyframePosRect.height + clickRadius;\n            }\n            if (isMouseOver) {\n              toReturn.push({\n                keyframe: keyframeViewModel.model,\n                keyframes: [keyframeViewModel.model],\n                val: keyframeViewModel.model.val,\n                row: keyframeViewModel.rowViewModel.model,\n                type: TimelineElementType.Keyframe,\n              } as TimelineElement);\n            }\n          }\n        },\n        (rowViewModel) => {\n          const rowOverlapped = TimelineUtils.isOverlap(pos.x, pos.y, rowViewModel.size);\n          if (rowOverlapped) {\n            const row = {\n              val: this._mousePosToVal(pos.x, snap),\n              keyframes: rowViewModel.model.keyframes,\n              type: TimelineElementType.Row,\n              row: rowViewModel.model,\n            } as TimelineElement;\n            toReturn.push(row);\n          }\n        },\n      );\n    }\n\n    if (!onlyTypes || onlyTypes.length === 0) {\n      return toReturn;\n    } else {\n      return toReturn.filter((p) => onlyTypes && onlyTypes.includes(p.type));\n    }\n  };\n\n  /**\n   * Subscribe user callback on duration changed.\n   */\n  public onDurationChanged = (callback: (eventArgs: TimelineTimeChangedEvent) => void): void => {\n    this.on(TimelineEvents.DurationChanged, callback);\n  };\n\n  /**\n   * Subscribe user callback on time changed.\n   */\n  public onTimeChanged = (callback: (eventArgs: TimelineTimeChangedEvent) => void): void => {\n    this.on(TimelineEvents.TimeChanged, callback);\n  };\n  /**\n   * Subscribe user callback on drag started event.\n   */\n  public onDragStarted = (callback: (eventArgs: TimelineDragEvent) => void): void => {\n    this.on(TimelineEvents.DragStarted, callback);\n  };\n  /**\n   * Subscribe user callback on zoom event.\n   */\n  public onZoom = (callback: (eventArgs: TimelineTimeChangedEvent) => void): void => {\n    this.on(TimelineEvents.ZoomChanged, callback);\n  };\n  /**\n   * Subscribe user callback on drag event.\n   */\n  public onDrag = (callback: (eventArgs: TimelineDragEvent) => void): void => {\n    this.on(TimelineEvents.Drag, callback);\n  };\n  /**\n   * Subscribe user callback on drag finished event.\n   */\n  public onDragFinished = (callback: (eventArgs: TimelineDragEvent) => void): void => {\n    this.on(TimelineEvents.DragFinished, callback);\n  };\n  /**\n   * Subscribe user callback on double click.\n   */\n  public onDoubleClick = (callback: (eventArgs: TimelineClickEvent) => void): void => {\n    this.on(TimelineEvents.DoubleClick, callback);\n  };\n  /**\n   * Subscribe user callback on keyframe changed event.\n   */\n  public onKeyframeChanged = (callback: (eventArgs: TimelineKeyframeChangedEvent) => void): void => {\n    this.on(TimelineEvents.KeyframeChanged, callback);\n  };\n  /**\n   * Subscribe user callback on drag finished event.\n   */\n  public onMouseDown = (callback: (eventArgs: TimelineClickEvent) => void): void => {\n    this.on(TimelineEvents.MouseDown, callback);\n  };\n\n  /**\n   * Subscribe user callback on selected.\n   */\n  public onSelected = (callback: (eventArgs: TimelineSelectedEvent) => void): void => {\n    this.on(TimelineEvents.Selected, callback);\n  };\n  /**\n   * Subscribe user callback on scroll event\n   */\n  public onScroll = (callback: (eventArgs: TimelineScrollEvent) => void): void => {\n    this.on(TimelineEvents.Scroll, callback);\n  };\n  /**\n   * Subscribe on scroll finished event.\n   */\n  public onScrollFinished = (callback: (eventArgs: TimelineScrollEvent) => void): void => {\n    this.on(TimelineEvents.ScrollFinished, callback);\n  };\n  /**\n   * Subscribe on canvas context menu event.\n   */\n  public onContextMenu = (callback: (eventArgs: TimelineClickEvent) => void): void => {\n    this.on(TimelineEvents.ContextMenu, callback);\n  };\n\n  /**\n   * Subscribe on canvas keydown event.\n   */\n  public onKeyDown = (callback: (eventArgs: KeyboardEvent) => void): void => {\n    this.on(TimelineEvents.KeyDown, callback);\n  };\n\n  /**\n   * Subscribe on canvas keyup event.\n   */\n  public onKeyUp = (callback: (eventArgs: KeyboardEvent) => void): void => {\n    this.on(TimelineEvents.KeyUp, callback);\n  };\n\n  /**\n   * Subscribe on canvas keypress event.\n   */\n  public onKeyPress = (callback: (eventArgs: KeyboardEvent) => void): void => {\n    this.on(TimelineEvents.KeyPress, callback);\n  };\n\n  /**\n   * Private.\n   * Emit internally scroll eve\n   */\n  _emitScrollEvent = (args: Event | null, scrollProgrammatically: boolean, eventType = TimelineEvents.Scroll): TimelineScrollEvent => {\n    const scrollEvent = {\n      args: args,\n      scrollProgrammatically: scrollProgrammatically,\n      scrollLeft: this.scrollLeft,\n      scrollTop: this.scrollTop,\n      scrollHeight: this._scrollContainer?.scrollHeight || 0,\n      scrollWidth: this._scrollContainer?.scrollWidth || 0,\n    } as TimelineScrollEvent;\n    super.emit(eventType, scrollEvent);\n    return scrollEvent;\n  };\n  _emitKeyframeChanged = (element: TimelineElementDragState, source: TimelineEventSource = TimelineEventSource.Programmatically): TimelineKeyframeChangedEvent => {\n    const args = new TimelineKeyframeChangedEvent();\n    args.val = element.val;\n    args.prevVal = element.prevVal;\n    args.target = element;\n    args.source = source;\n    this.emit(TimelineEvents.KeyframeChanged, args);\n    return args;\n  };\n  _emitDragStartedEvent = (dragState: TimelineDraggableData): TimelineDragEvent | null => {\n    if (!dragState) {\n      return null;\n    }\n    const args = this._getDragEventArgs(dragState, this._currentPos);\n    this.emit(TimelineEvents.DragStarted, args);\n    if (args.isPrevented()) {\n      this._preventDrag(args, dragState, true);\n    }\n    return args;\n  };\n  /**\n   * Private emit timeline event that dragging element is finished.\n   * @param forcePrevent - needed when during dragging components set to the state when they cannot be dragged anymore. (used only as recovery state).\n   * @returns\n   */\n  _emitDragFinishedEvent = (dragState: TimelineDraggableData, forcePrevent = false): TimelineDragEvent | null => {\n    if (!dragState || !dragState.changed) {\n      return null;\n    }\n    const args = this._getDragEventArgs(dragState, this._currentPos);\n    if (forcePrevent) {\n      args.preventDefault();\n    }\n    this.emit(TimelineEvents.DragFinished, args);\n    if (args.isPrevented()) {\n      this._preventDrag(args, dragState, true);\n    }\n    return args;\n  };\n  _preventDrag = (dragArgs: TimelineDragEvent, data: TimelineDraggableData, toStart = false): void => {\n    if (dragArgs.elements) {\n      dragArgs.elements.forEach((element) => {\n        const toSet = toStart ? element.startedVal : element.prevVal;\n        this._setKeyframePos(element, toSet);\n      });\n    }\n    data.val = data.prevVal;\n    // Set prev active point\n    dragArgs.point = dragArgs.prevPoint;\n  };\n  _emitDragEvent = (dragState: TimelineDraggableData): TimelineDragEvent | null => {\n    if (!dragState) {\n      return null;\n    }\n    const args = this._getDragEventArgs(dragState, this._currentPos);\n    this.emit<TimelineDragEvent>(TimelineEvents.Drag, args);\n    if (args.isPrevented()) {\n      this._preventDrag(args, dragState, false);\n    }\n    return args;\n  };\n  _emitKeyframesSelected = (state: TimelineSelectionResults): TimelineSelectedEvent => {\n    const args = new TimelineSelectedEvent();\n    args.selected = state.selected;\n    args.changed = state.changed;\n    this.emit<TimelineSelectedEvent>(TimelineEvents.Selected, args);\n    return args;\n  };\n  _getDragEventArgs = (dragState: TimelineDraggableData, point: TimelineMouseData | null): TimelineDragEvent => {\n    const draggableArguments = new TimelineDragEvent();\n    draggableArguments.point = point;\n    // Get cloned list\n    draggableArguments.elements = [...(dragState.elements || [])];\n    draggableArguments.target = dragState?.target || null;\n    return draggableArguments;\n  };\n}\n","// bundle entry point\n\nexport * from './timeline';\nexport * from './timelineEventsEmitter';\nexport * from './settings/timelineConsts';\n// @ public timeline models.\nexport * from './models/timelineRanged';\nexport * from './models/timelineModel';\nexport * from './models/timelineRow';\nexport * from './models/timelineKeyframe';\n\n// @public styles\nexport * from './settings/timelineOptions';\nexport * from './settings/styles/timelineKeyframeStyle';\nexport * from './settings/styles/timelineRowStyle';\nexport * from './settings/styles/timelineStyle';\nexport * from './settings/styles/timelineGroupStyle';\n\nexport * from './utils/timelineStyleUtils';\nexport * from './utils/timelineUtils';\nexport * from './utils/timelineElement';\n\n// @private helper containers.\nexport * from './utils/timelineSelectable';\nexport * from './utils/timelineCutBoundsRectResults';\nexport * from './utils/timelineSelectionResults';\nexport * from './utils/timelinePoint';\nexport * from './utils/timelineMouseData';\nexport * from './utils/timelineElementDragState';\nexport * from './utils/timelineDraggableData';\n\n// @private virtual model\nexport * from './viewModels/timelineGroupViewModel';\nexport * from './viewModels/timelineKeyframeViewModel';\nexport * from './viewModels/timelineRowViewModel';\nexport * from './viewModels/timelineViewModel';\n\n// @public events\nexport * from './utils/events/timelineKeyframeChangedEvent';\nexport * from './utils/events/timelineTimeChangedEvent';\nexport * from './utils/events/timelineSelectedEvent';\nexport * from './utils/events/timelineScrollEvent';\nexport * from './utils/events/timelineClickEvent';\nexport * from './utils/events/timelineDragEvent';\n\n// @public enums\nexport * from './enums/timelineKeyframeShape';\nexport * from './enums/timelineInteractionMode';\nexport * from './enums/timelineScrollSource';\nexport * from './enums/timelineElementType';\nexport * from './enums/timelineCursorType';\nexport * from './enums/timelineCapShape';\nexport * from './enums/timelineEventSource';\nexport * from './enums/timelineSelectionMode';\nexport * from './enums/timelineEvents';\n// @private defaults are exposed:\nexport * from './settings/defaults/defaultTimelineStyle';\nexport * from './settings/defaults/defaultTimelineRowStyle';\nexport * from './settings/defaults/defaultTimelineOptions';\nexport * from './settings/defaults/defaultTimelineKeyframeStyle';\nexport * from './settings/defaults/defaultTimelineConsts';\nexport * from './settings/defaults/defaultGroupStyle';\n"],"names":["TimelineEventsEmitter","_classCallCheck","_defineProperty","_createClass","key","value","on","topic","callback","_subscriptions","push","off","before","length","filter","event","offAll","emit","args","forEach","TimelineKeyframeShape","defaultDenominators","TimelineUtils","drawLine","ctx","x1","y1","x2","y2","moveTo","lineTo","isNumber","val","isNaN","Number","isFinite","deleteElement","array","element","index","indexOf","splice","isOverlap","x","y","rectangle","width","height","findGoodStep","originalStep","divisionCheck","arguments","undefined","denominators","step","lastDistance","pow","getPowArgument","i","denominator","calculatedStep","Math","distance","getDistance","keepInBounds","min","max","setMinMax","to","from","shrink","fromMin","NaN","toMin","isFromMinNumber","isToMinNumber","fromMax","toMax","isFromMaxNumber","isToMaxNumber","shrinkSelf","rect","isRectIntersects","rect2","touch","console","log","right","bottom","sqrt","abs","sign","p","clearBrowserSelection","window","getSelection","selection","removeAllRanges","doc","document","empty","toCheck","category","s","floor","zerosCount","mergeOptions","previousOptions","newOptions","toArg","cloneOptions","mergeOptionsDeep","Object","prototype","hasOwnProperty","call","_typeof","timePadZero","num","len","str","String","threshold","concat","JSON","parse","stringify","clonedValue","id","defaultRowHeight","margin","defaultGroupStyle","marginTop","fillColor","defaultTimelineKeyframeStyle","shape","Rhomb","selectedFillColor","strokeColor","selectedStrokeColor","strokeThickness","defaultTimelineRowStyle","marginBottom","keyframesStyle","groupsStyle","undefinedConst","TimelineStyleUtils","getGroup","groupModel","style","getGroupStyle","_TimelineStyleUtils$g","getFirstSet","defaultValue","_len","params","Array","_key","getValue","apply","returnFalseIfAnyFalse","valuesFound","found","_len2","_key2","toReturn","getValueOrDefault","keyframeWidth","keyframe","group","rowStyle","options","_keyframe$style","_TimelineStyleUtils$g2","_rowStyle$keyframesSt","_rowStyle$groupsStyle","_options$rowsStyle","_options$rowsStyle2","rowsStyle","keyframeHeight","_keyframe$style2","_TimelineStyleUtils$g3","_rowStyle$keyframesSt2","_rowStyle$groupsStyle2","_options$rowsStyle3","_options$rowsStyle4","keyframeShape","_keyframe$style3","_TimelineStyleUtils$g4","_rowStyle$groupsStyle3","_rowStyle$keyframesSt3","_options$rowsStyle5","_options$rowsStyle6","keyframeFillColor","_keyframe$style4","_TimelineStyleUtils$g5","_rowStyle$groupsStyle4","_rowStyle$keyframesSt4","_options$rowsStyle7","_options$rowsStyle8","keyframeSelectedFillColor","_keyframe$style5","_TimelineStyleUtils$g6","_rowStyle$groupsStyle5","_rowStyle$keyframesSt5","_options$rowsStyle9","_options$rowsStyle0","keyframeStrokeThickness","_keyframe$style6","_TimelineStyleUtils$g7","_rowStyle$groupsStyle6","_rowStyle$keyframesSt6","_options$rowsStyle1","_options$rowsStyle10","keyframeStrokeColor","_keyframe$style7","_TimelineStyleUtils$g8","_rowStyle$groupsStyle7","_rowStyle$keyframesSt7","_options$rowsStyle11","_options$rowsStyle12","keyframeSelectedStrokeColor","_keyframe$style8","_TimelineStyleUtils$g9","_rowStyle$groupsStyle8","_rowStyle$keyframesSt8","_options$rowsStyle13","_options$rowsStyle14","groupHeight","_TimelineStyleUtils$g0","_rowStyle$groupsStyle9","_options$rowsStyle15","groupMarginTop","_TimelineStyleUtils$g1","_rowStyle$groupsStyle0","_options$rowsStyle16","groupFillColor","_TimelineStyleUtils$g10","_rowStyle$groupsStyle1","_options$rowsStyle17","groupStrokeColor","_TimelineStyleUtils$g11","_rowStyle$groupsStyle10","_options$rowsStyle18","groupStrokeThickness","_TimelineStyleUtils$g12","_rowStyle$groupsStyle11","_options$rowsStyle19","groupsRadii","_TimelineStyleUtils$g13","_rowStyle$groupsStyle12","_options$rowsStyle20","radii","getRowHeight","_options$rowsStyle21","getRowMarginBottom","_options$rowsStyle22","getRowFillColor","_options$rowsStyle23","headerHeight","keyframeDraggable","row","_TimelineStyleUtils$g14","findFirstNegativeBool","boolResult","draggable","keyframesDraggable","groupDraggable","_TimelineStyleUtils$g15","groupsDraggable","TimelineElementType","TimelineDraggableData","None","TimelineBaseEvent","preventDefault","_prevented","isPrevented","TimelineKeyframeChangedEvent","_TimelineBaseEvent","_this","_callSuper","_inherits","TimelineEventSource","TimelineTimeChangedEvent","User","TimelineSelectionEventSource","TimelineSelectedEvent","Keyframes","TimelineClickEvent","get","_this$point","point","pos","TimelineDragEvent","TimelineInteractionMode","TimelineCursorType","TimelineCapShape","TimelineSelectionMode","TimelineEvents","TimelineScrollSource","defaultTimelineConsts","autoPanSpeed","scrollByDragSpeed","clickDetectionMs","doubleClickTimeoutMs","scrollFinishedTimeoutMs","autoPanByScrollPadding","clickThreshold","clickDetectionMinRadius","autoPanSpeedLimit","defaultGroupHeight","defaultTimelineStyle","capStyle","capType","Rect","cursor","EWResize","defaultTimelineOptions","snapAllKeyframesOnMove","snapEnabled","timelineStyle","stepPx","stepVal","stepSmallPx","snapStep","leftMargin","headerFillColor","labelsColor","tickColor","selectionColor","font","zoom","zoomSpeed","zoomMin","zoomMax","controlKeyIsMetaKey","scrollContainerClass","timelineDraggable","MAX_VALUE","totalDuration","Timeline","_TimelineEventsEmitte","_options$totalDuratio","model","Selection","_model","Error","_generateContainers","_options","_setOptions","_subscribeComponentEvents","rescale","redraw","HTMLElement","_container","getElementById","_scrollContainer","createElement","_scrollContent","_canvas","getContext","innerHTML","position","cssText","appendChild","scrollBarWidth","offsetWidth","clientWidth","_ctx","_getCtx","_unsubscribeComponentEvents","addEventListener","_handleWheelEvent","_handleScrollEvent","_handleScrollMouseDownEvent","_handleKeyUp","_handleKeyDown","_handleBlurEvent","_handleWindowResizeEvent","_handleMouseDownEvent","_handleContextMenu","_handleMouseMoveEvent","_handleMouseUpEvent","_this$_container","removeEventListener","warn","_stopAutoPan","_clearScrollFinishedTimer","_cleanUpSelection","_interactionMode","Zoom","_setZoomCursor","_superPropGet","KeyDown","e","_controlKeyPressed","_setCursor","ZoomOut","ZoomIn","_scrollFinishedTimerRef","clearTimeout","_scrollAreaClickOrDragStarted","scrollProgrammatically","_scrollProgrammatically","setTimeout","_isPanStarted","_emitScrollEvent","ScrollFinished","_consts","metaKey","ctrlKey","_zoom","deltaY","disableScrollY","scrollTop","scrollLeft","deltaX","direction","speed","diff","_canvasClientWidth","_fromScreen","_currentZoom","prevZoom","_setZoom","zoomCenter","valToPx","newScrollLeft","round","_rescaleInternal","ZoomMode","_this$_scrollContaine","_this$_scrollContaine2","_this$_options","_this$_options2","timelineEvent","prevVal","ZoomChanged","getZoom","zoomSet","_val","radius","mousePosTimeline","_trackMousePos","clickRadius","_getClickDetectionRadius","elements","elementFromPoint","target","_findDraggableElement","ContextMenu","_startPosMouseArgs","isDoubleClick","Date","now","_lastClickTime","_lastClickPoint","_scrollStartPos","_clickAllowed","onlyElements","NonInteractivePan","DurationLine","DoubleClick","MouseDown","_clickTimeout","_currentPos","_drag","type","_setElementDragState","Keyframe","_target$keyframe","_startedDragWithCtrl","_startedDragWithShiftKey","shiftKey","selected","_selectInternal","getSelectedElements","map","Group","keyframes","isArray","_this$_drag","_convertToTimelineElement","state","startedVal","buttons","_lastUsedArgs","touchEventArgs","isTouch","changedTouches","_selectionRect","_clickTimeoutIsOver","_selectionRectEnabled","isLeftClicked","isLeftButtonClicked","convertedVal","_setDurationInternal","_setTimeInternal","offset","movedOffset","_moveElements","changed","eventArgs","_emitDragStartedEvent","_emitDragEvent","_durationVal","Pan","Grabbing","_scrollByPan","_scrollBySelectionOutOfBounds","Grab","Default","Pointer","_this$_options3","mouseArgs","_getMousePos","mousePos","_performClick","_getKeyframesByRectangle","selectionMode","Append","Normal","select","clientHeight","screenRect","keyframesModels","_forEachKeyframe","keyframeViewModel","intersects","size","drag","isChanged","_drag$target","_this$_options4","mode","Revert","selectionChanged","_this$_options5","source","Programmatically","_emitKeyframeChanged","rowModel","data","rowViewModel","getAllKeyframes","node","selectable","nodes","results","getSelectedKeyframes","nodesArray","_changeNodeState","selectedItems","exists","_emitKeyframesSelected","_intervalRef","setInterval","clearInterval","_autoPanLastActionDate","_leftMargin","px","pxToVal","steps","snapVal","ms","totalSeconds","hours","minutes","seconds","_this$_options6","_this$_options7","canvas","screenWidth","wasToVal","valDistance","fromVal","toVal","ceil","lastTextStart","save","tickHeight","smallTickHeight","sharpPos","_getSharp","_toScreenPx","isLabelTick","beginPath","setLineDash","lineWidth","strokeStyle","currentTickHeight","stroke","fillStyle","text","_formatUnitsText","textSize","measureText","textX","fillText","restore","rowsViewModels","keyframesViewModels","rows","rowAbsoluteHeight","hidden","rowHeight","currentRowY","rowSize","groupsViewModels","_rowViewModel$groupsV","groupViewModel","find","keyframeSize","_getKeyframePosition","groupRect","_getKeyframesGroupSize","viewModel","_generateViewModel","_rowViewModel$model$k","bounds","_cutBounds","fillRect","_renderGroupBounds","metadata","frames","_rowViewModel$model$k2","_rowViewModel$model$k3","_rowViewModel$model$k4","_rowViewModel$model$k5","_this$_durationVal","_rowViewModel$model$k6","_rowViewModel$model$k7","_rowViewModel$model$k8","_ref","_rowViewModel$model$s","_rowViewModel$model$s2","_this$_options$rowsSt","startPixelVal","endPixelVal","durationPixelVal","frameWidth","scaleFactor","totalFrames","maxFrames","frameGap","_this$_options$leftMa","leftX","frameIndex","frame","frameX","drawImage","newWidth","rowColor","startsWith","substring","_this$_options$leftMa2","_this$_options$leftMa3","_rowViewModel$groupsV2","_groupsViewModels$key","_rowViewModel$model","_rowViewModel$model2","_rowViewModel$model3","_rowViewModel$model4","rectBounds","roundRect","fill","testOffset","minX","maxX","minY","maxY","_canvasClientHeight","_cutBoundsWhenOverlap","offsetW","offsetH","overlapY","overlapX","_rowViewModel$model5","_rowViewModel$model6","rowY","isAutoHeight","parseInt","isAutoMargin","xMin","xMax","_rowViewModel$model7","_rowViewModel$model8","clip","_renderKeyframe","_keyframeViewModel$gr","keyframeColor","border","translate","rotate","PI","Circle","arc","thickness","_pixelRatio","strokeRect","clearRect","_this$_options8","_this$_options9","timeLinePos","timeLinePosEnd","yBottom","canvasHeight","durationStrokeColor","durationCapStyle","_renderTimelineCap","capSize","capHeight","Triangle","closePath","_window","requestAnimationFrame","_redrawInternal","scrollWidth","_this$_options$fillCo","scrollToRightBounds","timelineColor","endsWith","_this$_options$timeli","_renderBackground","_renderRows","_renderHeaderBackground","_renderTicks","_renderKeyframes","_renderSelectionRect","_renderTimeline","DurationChanged","TimeChanged","force","SetTimeMethod","toSet","classList","contains","add","background","_applyContainersStyles","clientX","clientY","radiusX","radiusY","getBoundingClientRect","scaleX","scaleY","left","top","setTransform","newHeight","scrollMode","DefaultMode","_updateCanvasScale","_this$_scrollContaine3","additionalOffset","timelineGlobalPos","timelinePos","timelineDuration","rightPosition","getClientWidth","ScrollBySelection","keyframeW","minWidthPx","minWidth","h","minHeight","filteredElements","_element$keyframe","_this$_options0","Row","getPriority","_isDurationLinePresent","sortDraggable","a","b","prioA","prioB","sorted","_filterDraggableElements","sort","onlyTypes","_this$_options1","timelinePosDurationEnd","_timelineStyle$capSty","snap","_","isNextRow","keyframesGroupOverlapped","groupElement","_mousePosToVal","snapped","keyframePosRect","isMouseOver","extendedMouseRect","dist","rowOverlapped","includes","DragStarted","Drag","DragFinished","KeyframeChanged","Selected","Scroll","KeyUp","KeyPress","_this$_scrollContaine4","_this$_scrollContaine5","eventType","scrollEvent","scrollHeight","dragState","_getDragEventArgs","_preventDrag","forcePrevent","dragArgs","toStart","_setKeyframePos","prevPoint","draggableArguments","_toConsumableArray","initialize","_this2","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","_this2$_options","currentBounds","expectedKeyframeValue","newPosition","newValue","onRowCallback","_calculatedModel$rows","calculatedModel","nextRow","keyframeIndex","clickArgs","originalVal","_this$_scrollStartPos","_this$_scrollStartPos2","startPos","_this$_scrollContaine6","getClientHeight","_this$_scrollContaine7","_emitDragFinishedEvent","_checkUpdateSpeedTooFast","start","scrollStartPos","offsetX","newLeft","speedX","speedY","isLeft","isRight","isTop","isBottom","_startAutoPan","scrollSpeedMultiplier","stops","stepsFit","minSteps","minOffset","_this$_scrollContaine8","set","_this$_scrollContaine9","_this$_options$timeli2","_this$_options$timeli3"],"sourceRoot":""}